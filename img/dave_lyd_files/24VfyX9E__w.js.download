if (self.CavalryLogger) { CavalryLogger.start_js(["x5w+l"]); }

__d("ComposerXContextConfig",[],(function(a,b,c,d,e,f){e.exports={propertyNames:{actorID:"ACTOR_ID",postID:"POST_ID"},propertyValues:{ACTOR_ID:"actorID",POST_ID:"postID"}}}),null);
__d("ComposerXAttachmentBootstrap",["csx","cx","CSS","Form","FormSubmit","Parent","URI"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=[],j={bootstrap:function(a){j.load(b("Parent").byTag(a,"form"),a.getAttribute("data-endpoint"))},load:function(a,c,d){c=new(b("URI"))(c).addQueryData({composerurihash:j.getURIHash(c)});b("CSS").conditionClass(a,"_fu",d);d=b("Parent").bySelector(a,"._2_4");b("CSS").removeClass(d,"async_saving");b("Form").setDisabled(a,!1);a.action=c.toString();b("FormSubmit").send(a)},getURIHash:function(a){if(a==="initial")return"initial";var b=i.indexOf(a);if(b!==-1)return b+"";else{b=i.length;i[b]=a;return b+""}}};e.exports=j}),null);
__d("ComposerXContext",["invariant","ComposerXContextConfig"],(function(a,b,c,d,e,f,g){__p&&__p();var h=function(a){return b("ComposerXContextConfig").propertyNames[a]};function a(a){"use strict";this.$1={};for(var b in a)this.setProperty(b,a[b])}a.prototype.getProperty=function(a){"use strict";h(a)||g(0);return this.$1[a]};a.prototype.setProperty=function(a,b){"use strict";h(a)||g(0);this.$1[a]=b;return this};a.PROPERTIES=b("ComposerXContextConfig").propertyValues;e.exports=a}),null);
__d("ComposerXSessionIDInserter",["csx","cx","ComposerXSessionIDs","DOM","DOMQuery","Event","Parent","onEnclosingPageletDestroy"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i={init:function(a){var c=b("Event").listen(a,"submit",i._onSubmit);b("onEnclosingPageletDestroy")(a,function(){c.remove()})},_onSubmit:function(a){i.insertSessionInput(a.getTarget())},insertSessionInput:function(a){var c=b("Parent").bySelector(a,"._119");if(!c)return;c=b("ComposerXSessionIDs").getSessionID(c.id);if(!c)return;var d=b("DOMQuery").scry(a,"._5r_b")[0];!d?b("DOM").prependContent(a,b("ComposerXSessionIDs").createSessionIDInput(c)):d.value=c}};e.exports=i}),null);
__d("ComposerX",["csx","cx","ActorURI","Arbiter","ComposerXAttachmentBootstrap","ComposerXContext","ComposerXMarauderLogger","ComposerXSessionIDs","ComposerXSessionIDInserter","ComposerXStore","CSS","DOM","DOMQuery","PrivacyConst","PrivacySelector","PrivacySelectorNewDispatcher","URI","SubscriptionsHandler","getObjectValues","removeFromArray"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i="any";function a(a){"use strict";this._root=a,this._composerID=a.id,this._attachments={},this._context=new(b("ComposerXContext"))({}),b("ComposerXSessionIDs").resetSessionID(this._composerID),b("ComposerXSessionIDInserter").init(this._root),this._subscriptionsHandler=new(b("SubscriptionsHandler"))(),this._subscriptionsHandler.addSubscriptions(b("Arbiter").subscribe(["composer/publish","composer/close"],function(c,d){if(d.composer_id===this._composerID){this.reset();c=b("DOMQuery").scry(a,".hidden_target_specs");c&&c.length&&c.forEach(b("DOM").remove);b("Arbiter").inform("composer/publishDone",d)}}.bind(this))),this._subscriptionsHandler.addSubscriptions.apply(this._subscriptionsHandler,b("ComposerXMarauderLogger").listenForPostEvents(this._composerID,this._getContent())),this._attachmentFetchForm=b("DOMQuery").find(a,"._2_4"),b("Arbiter").inform("composer/ready",{},b("Arbiter").BEHAVIOR_STATE)}a.prototype.getAttachment=function(a,c,d,e){"use strict";a=this._augmentURI(a);var f=b("ComposerXAttachmentBootstrap").getURIHash(a);this._endpointHashToShow=f;var g=this._attachments[f];g&&!e?this._showAttachmentAfterComponentsLoaded(f,d):this.fetchAttachmentData(a,c,e)};a.prototype.fetchAttachmentData=function(a,c,d){"use strict";a=this._augmentURI(a);var e=b("ComposerXAttachmentBootstrap").getURIHash(a);if(this._attachments[e]&&!d)return;this._currentFetchEndpoints.includes(e)||(b("ComposerXAttachmentBootstrap").load(this._attachmentFetchForm,a,c),this._currentFetchEndpoints.push(e))};a.prototype.setAttachment=function(a,c,d,e){"use strict";b("removeFromArray")(this._currentFetchEndpoints,a),this._setupAttachment(a,c,d,e),this._showAttachmentAfterComponentsLoaded(a,!1)};a.prototype.setInitialAttachment=function(a,c,d,e,f){"use strict";f&&(this._context=f);a=this._augmentURI(a);f=b("ComposerXAttachmentBootstrap").getURIHash(a);this._setupAttachment(f,c,d,e);this._initialAttachmentEndpoint=a;this._currentInstance||this._showAttachmentAfterComponentsLoaded(f,!0)};a.prototype.setComponent=function(a,c){"use strict";b("ComposerXStore").get(this._composerID,a)||(b("ComposerXStore").set(this._composerID,a,c),b("DOM").appendContent(this._attachmentFetchForm,b("DOM").create("input",{type:"hidden",name:"loaded_components[]",value:a})))};a.prototype.reset=function(){"use strict";__p&&__p();this._currentInstance&&(this._currentInstance.cleanup(),this._currentInstance=null);b("ComposerXSessionIDs").resetSessionID(this._composerID);for(var a in this._attachments)this._attachments[a].instance.reset();var c=b("ComposerXStore").getAllForComposer(this._composerID);b("getObjectValues")(c).forEach(function(a){a.reset&&a.reset(a)});c=b("PrivacySelector").getAdamaSelectorInstance(b("DOM").scry(this._root,"div._1lo2")[0]);var d=b("ComposerXStore").get(this._composerID,"mainprivacywidget");d=d&&d.instance&&d.instance.getInstance();c?d.setInstance(c):c=d&&d.getInstance();c&&c.shouldReplaceOnPost()&&b("PrivacySelectorNewDispatcher").handleUpdateFromSelector({selector_type:b("PrivacyConst").PrivacyField.CURRENT_COMPOSER.toString(),post_param:"",unique_id:"_reloadStickySelectors",reload:!0});this.getAttachment(this._initialAttachmentEndpoint,!1,!0);b("Arbiter").inform("composer/reset")};a.prototype.destroy=function(){"use strict";this._subscriptionsHandler.release()};a.prototype.addPlaceholders=function(a,b){"use strict";__p&&__p();var c;for(var d in this._attachments){c=this._attachments[d];if(c.instance===a){b.forEach(function(a){c.placeholders.push(a),c.required_components.push(a.component_name)});break}}this._currentInstance===a&&this._fillPlaceholders(b)};a.prototype.hasAttachmentWithClassName=function(a){"use strict";return b("DOMQuery").scry(this._root,"."+a).length>0};a.prototype.showAttachmentThrobber=function(){"use strict";b("CSS").addClass(this._attachmentFetchForm,"async_saving")};a.prototype.hideAttachmentThrobber=function(){"use strict";b("CSS").removeClass(this._attachmentFetchForm,"async_saving")};a.prototype.getContext=function(){"use strict";return this._context};a.prototype.getID=function(){"use strict";return this._composerID};a.prototype._setupAttachment=function(a,c,d,e){"use strict";c.setComposerID(this._composerID);this._attachments[a]={instance:c,placeholders:d,required_components:e};a=this._getContent();d=c.getRoot();d.parentNode!==a&&(b("CSS").hide(d),b("DOM").appendContent(a,d))};a.prototype._getContent=function(){"use strict";return b("DOMQuery").find(this._root,"div._55d0")};a.prototype._showAttachment=function(a,c,d,e){"use strict";__p&&__p();if(this._currentInstance===a)return;if(this._endpointHashToShow===i)this._endpointHashToShow=null;else if(this._endpointHashToShow!==c)return;if(this._currentInstance){if(!this._currentInstance.canSwitchAway())return;this._currentInstance.cleanup()}this._currentInstance=a;c=this._getContent().childNodes;var f=a.getRoot();for(var g=0;g<c.length;g++)c[g]!==f&&b("CSS").hide(c[g]);b("CSS").show(f);this._fillPlaceholders(d);a.initWithComponents(e);this._setAttachmentSelectedClass(a.attachmentClassName);b("Arbiter").inform("composer/initializedAttachment",{composerRoot:this._root,isInitial:e})};a.prototype._showAttachmentAfterComponentsLoaded=function(a,c){"use strict";var d=this._attachments[a];b("ComposerXStore").waitForComponents(this._composerID,d.required_components,this._showAttachment.bind(this,d.instance,a,d.placeholders,c))};a.prototype._fillPlaceholders=function(a){"use strict";a.forEach(function(a){var c=b("ComposerXStore").get(this._composerID,a.component_name);c.element&&a.element!==c.element.parentNode&&b("DOM").setContent(a.element,c.element)}.bind(this))};a.prototype._setAttachmentSelectedClass=function(a){"use strict";var c=b("DOMQuery").scry(this._root,"._519b")[0];c&&(b("CSS").removeClass(c,"_519b"),c=b("DOMQuery").scry(c,'*[aria-pressed="true"]')[0],c&&c.setAttribute("aria-pressed","false"));if(a){a=b("DOMQuery").scry(this._root,"."+a)[0];a&&(b("CSS").addClass(a,"_519b"),c=b("DOMQuery").scry(a,'*[aria-pressed="false"]')[0],c&&c.setAttribute("aria-pressed","true"))}};a.prototype._augmentURI=function(a){"use strict";var c=this._context.getProperty(b("ComposerXContext").PROPERTIES.ACTOR_ID);c=c?b("ActorURI").create(a,c):new(b("URI"))(a);a=this._context.getProperty(b("ComposerXContext").PROPERTIES.POST_ID);a&&c.addQueryData("post_id",a);return c.toString()};Object.assign(a.prototype,{_endpointHashToShow:i,_currentFetchEndpoints:[],_initialAttachmentEndpoint:""});e.exports=a}),null);
__d("registerForLeaveWarning",["fbt","Run","URI","createCancelableFunction"],(function(a,b,c,d,e,f,g){__p&&__p();function c(a){var c=b("URI").getNextURI(),d=b("createCancelableFunction")(a);b("Run").onBeforeUnload(function(){return h(d,c)});return d}function h(c,d){__p&&__p();var e=b("URI").getMostRecentURI(),f=b("URI").getNextURI();e=Object.prototype.hasOwnProperty.call(e.getQueryData(),"theater")&&d.path===f.path;var i=Object.prototype.hasOwnProperty.call(f.getQueryData(),"theater");f=a.DialogNavigationStack&&a.DialogNavigationStack.isActiveURI(f);if(e||i||f){b("Run").onAfterLoad(function(){b("Run").onBeforeUnload(function(){return h(c,d)})});return}if(a.Dialog&&a.Dialog.getCurrent())return;if(c())return g._("You haven't finished your post yet. Do you want to leave without finishing?")}e.exports=c}),null);
__d("ComposerXController",["csx","cx","invariant","ActorURI","Arbiter","ComposerX","ComposerXAttachmentBootstrap","ComposerXContext","ComposerXMarauderLogger","Event","Parent","$","emptyFunction","ge","registerForLeaveWarning"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j={},k={},l={};function m(a){var c=b("ge")(a);if(!c)return null;c=b("Parent").bySelector(b("$")(a),"._119");a=c.id;l[a]||(l[a]=new(b("ComposerX"))(c));return l[a]}function n(a){a=m(a);a!==null||i(0);return a}function o(a){if(!k[a])return;k[a].forEach(function(a){return a.cancel()});delete k[a]}var p={registerConditionForComposerCancel:function(a,c){a=n(a).getID();a in j||(j[a]=[]);j[a].push(c);a in k||(k[a]=[]);k[a].push(b("registerForLeaveWarning")(c))},hasChanges:function(a){a=j[a];return!a?!1:a.some(function(a){return a()})},getAttachment:function(a,b,c,d){a=n(a);a.getAttachment(b,c,null,d)},fetchAttachmentData:function(a,b,c){n(a).fetchAttachmentData(b,c)},setAttachment:function(a,b,c,d,e){a=m(a);a&&a.setAttachment(b,c,d,e)},setInitialAttachment:function(a,b,c,d,e,f){a=n(a);a.setInitialAttachment(b,c,d,e,f)},setComponent:function(a,b,c){a=m(a);a&&a.setComponent(b,c)},reset:function(a){a=n(a);a.reset()},holdTheMarkup:b("emptyFunction"),getEndpoint:function(a,c,d){a=n(a);var e=a.getContext();c=b("ActorURI").create(c,e.getProperty(b("ComposerXContext").PROPERTIES.ACTOR_ID)).toString();b("ComposerXAttachmentBootstrap").load(a._attachmentFetchForm,c,d)},addPlaceholders:function(a,b,c){a=n(a);a.addPlaceholders(b,c)},hasAttachmentWithClassName:function(a,b){a=n(a);return a.hasAttachmentWithClassName(b)},showAttachmentThrobber:function(a){a=n(a);a.showAttachmentThrobber()},hideAttachmentThrobber:function(a){a=n(a);a.hideAttachmentThrobber()},logEventForElement:function(a,c){if(!b("Parent").bySelector(b("$")(a),"._119"))return;b("Event").listen(a,"click",function(){var d=p.getComposerID(a);b("ComposerXMarauderLogger").logEvent(c,d)})},getComposerID:function(a){return n(a).getID()},destroyComposer:function(a){if(!(a in l))return;l[a].destroy();delete l[a];delete j[a];o(a)}};b("ComposerXAttachmentBootstrap").bootstrap=function(a){p.getAttachment(a,a.getAttribute("data-endpoint"))};b("Arbiter").subscribe("page_transition",function(){for(var a in l)b("ge")(a)||p.destroyComposer(a)});e.exports=p}),null);
__d("QE",["Banzai","Cache"],(function(a,b,c,d,e,f){__p&&__p();var g="qe_log_exposure",h=60,i=new(b("Cache"))();a={logExposure:function(a,c){var d=c?a+"|"+c:a;if(i.has(d))return;var e={signal:!0};a={name:a,id:null};c&&(a.id=c);b("Banzai").post(g,a,e);i.set(d,!0,1,h)}};e.exports=a}),null);
__d("CommercialBreakExposureLogger",["CommercialBreakMobileEvent","CommercialBreakNoAdReason","DateConsts","InstreamVideoAdType","MarauderLogger","QE","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d,e,f,g){"use strict";this.$1=a,this.$2=c,this.$3=d,this.$4=e,this.$5=f,this.$6=g,this.$7=new(b("SubscriptionsHandler"))(),d&&e&&this.$7.addSubscriptions(this.$1.addListener("updateStatus",this.$8.bind(this)))}a.prototype.$8=function(){"use strict";__p&&__p();var a=this.$1.getCurrentTimePosition()*b("DateConsts").MS_PER_SEC;for(var c=0;c<this.$3.length;c++){var d=this.$3[c].getTimeOffsetInMs()||0;if(a<=d&&a+this.$6>d){this.$7.release();b("QE").logExposure(this.$4);if(!this.$5){d={ad_break_index:this.$3[c].getIndex(),commercial_break_no_ad_reason:b("CommercialBreakNoAdReason").CONTROL_GROUP,host_video_id:this.$1.getVideoID(),instream_video_ad_type:this.$2?b("InstreamVideoAdType").VOD:b("InstreamVideoAdType").NONLIVE};b("MarauderLogger").log(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START_SHOW_NOTHING,"commercial_break",d)}return}}};e.exports=a}),null);
__d("CommercialBreakHostStoryController",["csx","cx","Arbiter","CommercialBreakState","CommercialBreakUtil","CSS","DOM","DOMQuery","StoryComponentVideoPlayerControllerRegistry","VideoPlayerLoggerSource","ge"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,c,d,e,f){"use strict";__p&&__p();this.$1=null;this.$6=null;this.$7=null;this.$8=null;this.$9=null;this.$2=d;this.$18=f;this.$4=a;this.$3=c;this.$12=null;e&&(this.$17=e.toString());d=b("DOMQuery").scry(c,".uiLikePageButton");d.length!==0&&(this.$1=d[0]);f=b("DOMQuery").scry(c,"._5pbx");f.length!==0&&(this.$6=f[0]);a=b("DOMQuery").scry(c,"._2ezg");a.length!=0&&(this.$7=a[0]);e=b("DOMQuery").scry(c,"._5pcm");e.length!=0&&(this.$8=e[0]);d=b("DOMQuery").scry(c,"._5pbz");if(d.length!=0){f=d[0];this.$9=b("DOMQuery").scry(f,"._1dwg")}a=b("DOMQuery").scry(c,"._nqx");a.length>0&&(this.$10=a[0]);b("StoryComponentVideoPlayerControllerRegistry").registerHostStoryController(this,this.$17,this.$19.bind(this))}a.prototype.getContainerElement=function(){"use strict";return this.$3};a.prototype.getInstanceID=function(){"use strict";return this.$2};a.prototype.$19=function(a){"use strict";this.$13=a,this.$5=this.$13.getRootNode(),b("Arbiter").subscribe("VideoChannelView/closed",this.$20.bind(this)),this.$13.addListener("commercialBreak/hideUFI",this.$21.bind(this)),this.$13.addListener("commercialBreak/showUFI",function(){this.$11&&b("CommercialBreakUtil").removeContextCard(this.$11)}.bind(this)),this.$13.addListener("TahoeController/exitTahoe",this.$22.bind(this)),this.$16=a.addListener("optionsChange",function(){return this.$23()}.bind(this)),this.$23()};a.prototype.$23=function(){"use strict";this.$15=this.$13.getOption("VideoWithCommercialBreak","controller"),this.$14=this.$13.getOption("VideoWithInstreamVideo","controller"),this.$15&&(this.$16.remove(),this.$15.setStoryIdentifier(this.$18),this.$15.addListener("commercialBreak/stateChange",function(a){return this.$24(a.state)}.bind(this)))};a.prototype.$24=function(a){"use strict";a===b("CommercialBreakState").PLAY_AD?this.$25():this.$26()};a.prototype.$20=function(){"use strict";this.$27()};a.prototype.$22=function(){"use strict";this.$27()};a.prototype.$27=function(){"use strict";this.$15&&(this.$15.getIsCommercialBreakOngoing()&&this.$21())};a.prototype.$21=function(){"use strict";__p&&__p();if(!this.$28())return;var a=this.$5&&this.$5.parentNode;if(a){a=b("DOM").scry(a,"._16bp");if(a.length!=0)return}this.$11=b("DOM").create("div",{className:"_16bp"});b("DOM").insertAfter(this.$5,this.$11);b("CommercialBreakUtil").renderContextCard(this.$13,this.$11)};a.prototype.$28=function(){"use strict";return this.$29()||this.$30()};a.prototype.$30=function(){"use strict";return this.$13?this.$13.getSource()===b("VideoPlayerLoggerSource").PERMALINK:!1};a.prototype.$29=function(){"use strict";return this.$13?this.$13.getSource()===b("VideoPlayerLoggerSource").INLINE:!1};a.prototype.$25=function(){"use strict";__p&&__p();this.$1&&b("CSS").addClass(this.$1,"_3fcl");this.$4&&b("CSS").addClass(this.$4,"_3fcl");this.$6&&b("CSS").addClass(this.$6,"_3fcl");this.$7&&b("CSS").addClass(this.$7,"_3fcl");this.$8&&b("CSS").addClass(this.$8,"_3fcl");this.$9&&this.$9.map(function(a){b("CSS").addClass(a,"_3fcl")});this.$10&&b("CSS").addClass(this.$10,"_gtd");var a=b("StoryComponentVideoPlayerControllerRegistry").findPopoverAsyncMenuForVideoPlayerController(this.$13);if(a){a=a.getOptionsButtonID();this.$12=b("ge")(a)}this.$12&&b("CSS").addClass(this.$12,"_3fcl")};a.prototype.$26=function(){"use strict";this.$1&&b("CSS").removeClass(this.$1,"_3fcl"),this.$4&&b("CSS").removeClass(this.$4,"_3fcl"),this.$6&&b("CSS").removeClass(this.$6,"_3fcl"),this.$7&&b("CSS").removeClass(this.$7,"_3fcl"),this.$8&&b("CSS").removeClass(this.$8,"_3fcl"),this.$9&&this.$9.map(function(a){b("CSS").removeClass(a,"_3fcl")}),this.$10&&b("CSS").removeClass(this.$10,"_gtd"),this.$12&&b("CSS").removeClass(this.$12,"_3fcl"),this.$12=null};e.exports=a}),null);