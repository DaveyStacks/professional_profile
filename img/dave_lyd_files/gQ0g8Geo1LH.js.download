if (self.CavalryLogger) { CavalryLogger.start_js(["ilu+c"]); }

__d("TimelineProfilePictureLoggerEnums",[],(function(a,b,c,d,e,f){e.exports={actions:{ADD_FRAME:"add_frame",EDIT_THUMBNAIL:"edit_thumbnail",FROM_PHOTOS:"from_photos",MAKE_PROFILE:"make_profile",SILHOUETTE:"silhouette",SUGGESTION:"suggestion",SUGGESTION_UPLOAD:"suggestion_upload",SYNCED_PHOTO:"synced_photo",TAKE_PHOTO:"take_photo",UPLOAD:"upload_photo",USE_PREVIOUS:"use_previous"},flows:{PERMALINK:"permalink",SNOWLIFT:"snowlift",SPOTLIGHT:"spotlight",VAULT:"vault",ZOOMCROP:"zoomcrop"},steps:{CANCEL:"cancel",CROP:"crop",CROP_FAIL:"crop_fail",CROP_SAVING:"crop_saving",CROP_SUCCESS:"crop_success",DRAG_AND_DROP:"drag_and_drop",FAIL:"fail",INIT:"init",LOADING:"loading",PREVIOUS_PIC_FAIL:"previous_pic_fail",PREVIOUS_PIC_INIT:"previous_pic_init",PREVIOUS_PIC_SAVING:"previous_pic_saving",PREVIOUS_PIC_SUCCESS:"previous_pic_success",RESIZE_BEGIN:"resize_begin",RESIZE_SKIPPED:"resize_skipped",RESIZE_SUCCESS:"resize_success",RESIZE_FAIL:"resize_fail",SKIP_CROP:"skip_crop",SUCCESS:"success",UPLOAD_CANCEL:"upload_cancel",UPLOAD_SELECT:"upload_select",UPLOAD_SUCCESS:"upload_success",VIEWER_INIT:"viewer_init"}}}),null);
__d("ComposerXAjaxEndpoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADS_MEDIA_UPLOAD:"/ajax/ads/create/composerx/attachment/media/upload/",ADS_ATTACHMENT_STATUS:"/ajax/ads/create/composerx/attachment/status/",MEDIA_UPLOAD:"/ajax/composerx/attachment/media/upload/",VIDEO_UPLOAD:"/ajax/composerx/attachment/video/upload/"})}),null);
__d("isAnimatedGif",["Promise"],(function(a,b,c,d,e,f){__p&&__p();var g=1e6;function h(a){return a[0]===71&&a[1]===73&&a[2]===70}function i(a,b){return a[b]===0&&a[b+1]===33&&a[b+2]===249&&a[b+3]===4&&a[b+8]===0&&(a[b+9]===44||a[b+9]===33)}function j(a){if(!h(a))return!1;var b=0;for(var c=0;c+9<a.length;++c){i(a,c)&&b++;if(b>1)return!0}return!1}function a(a){__p&&__p();return new(b("Promise"))(function(b){__p&&__p();var c=new FileReader();c.onloadend=function(a){if(a.target.readyState==FileReader.DONE){a=new Uint8Array(a.target.result);j(a)?b(!0):b(!1)}};c.onerror=function(a){b(!1)};var d=Math.min(g,a.size);d=a.slice(0,d);c.readAsArrayBuffer(d)})}e.exports=a}),null);
__d("ComposerXMediaUploadHandler",["fbt","Arbiter","AsyncRequest","ComposerXAjaxEndpoint","ComposerXController","CSS","Dialog","ImageExtensions","QE","ReloadPage","SubscriptionsHandler","URI","VideoUploadConfig","VideoUploadFile","isAnimatedGif"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("ComposerXAjaxEndpoint").MEDIA_UPLOAD,i="/ajax/composerx/attachment/video/upload/",j=0;function k(a,b){"use strict";this.$1=a,this.$2=b}k.prototype.fetchAttachments=function(){"use strict";[this.getPhotoUploadAttachmentEndpoint(),i].forEach(function(a){b("ComposerXController").fetchAttachmentData(this.$1,a)}.bind(this))};k.prototype.handleFileSelected=function(a){"use strict";var b=this;k.isVideoOrAnimatedGifAsync(a,function(c){c?b.handleVideoSelected(a):b.handlePhotoSelected(a)})};k.canUploadAnimatedGIF=function(){"use strict";return b("ImageExtensions").GIF in b("VideoUploadConfig").videoExtensions};k.isVideoOrAnimatedGifAsync=function(a,c){"use strict";var d=b("VideoUploadFile").getExtensionFromFileInput(a.getInput());k.canUploadAnimatedGIF()&&d===b("ImageExtensions").GIF?b("isAnimatedGif")(a.getInput().files[0]).then(c):b("VideoUploadConfig").videoExtensions[d]?c(!0):c(!1)};k.prototype.handleVideoSelected=function(a){"use strict";if(this.$2&&this.$2.imagesOnly){var c=new(b("Dialog"))().setModal(!0).setButtons([b("Dialog").OK]);this.$2.isEditComposer?c.setTitle(g._("Can't add video")).setBody(g._("Sorry, you can't add a video to a post you're editing.")):c.setTitle(g._("Invalid Image File")).setBody(g._("Please upload a valid image file."));c.show();return}b("ComposerXController").getAttachment(this.$1,i);b("Arbiter").inform("ComposerXFilesStore/filesAdded/"+this.$1+"/videoupload",{fileInput:a},b("Arbiter").BEHAVIOR_PERSISTENT)};k.prototype.handlePhotoSelected=function(a){"use strict";b("ComposerXController").getAttachment(this.$1,this.getPhotoUploadAttachmentEndpoint()),k.$3(this.$1,a)};k.isVideoFile=function(a){"use strict";a=b("VideoUploadFile").getExtensionFromFileInput(a.getInput());return!!b("VideoUploadConfig").videoExtensions[a]};k.prototype.$4=function(){"use strict";return this.$2?this.$2.photoUploadOverrideEndpoint:null};k.prototype.getPhotoUploadAttachmentEndpoint=function(){"use strict";var a=this.$4();return a?a:h};k.$3=function(a,c){"use strict";b("Arbiter").inform("ComposerXFilesStore/filesAdded/"+a+"/mediaupload",{fileInput:c,receivedBySubscriber:!1},b("Arbiter").BEHAVIOR_PERSISTENT)};k.setupFileUploadToComposerDialog=function(a,c,d,e){"use strict";__p&&__p();var f="composerxmediauploadhandler"+j++,g=function(c){b("CSS").conditionClass(a.getControl(),d,c),a.getInput().disabled=c},h=new(b("URI"))(c),i=h.getQueryData();i.client_ref=f;h.setQueryData(i);c=h.toString();a.subscribe("change",function(){new(b("AsyncRequest"))().setURI(c).setErrorHandler(function(){a.clear(),g(!1)}).send(),g(!0)});b("Arbiter").subscribe("composer/dialog/"+f+"/new",function(c,d){this.$3(d.composerID,a);var f=new(b("SubscriptionsHandler"))();f.addSubscriptions(b("Arbiter").subscribe("composer/publish",function(event,a){e&&d.composerID===a.composer_id&&b("ReloadPage").now()}),d.dialog.subscribe("hide",function(){f.release(),a.clear(),g(!1)}))}.bind(this))};e.exports=k}),null);
__d("ServerRedirect",["FBLogger","ReloadPage","URI","goURI","killswitch"],(function(a,b,c,d,e,f){function a(a,c,d){var e=new(b("URI"))(a);e.getQualifiedURI().toString()===b("URI").getNextURI().toString()?b("FBLogger")("redirect").mustfix('Potentially infinite navigation detected: trying to navigate to "%s" while on "%s"',e.toString(),b("URI").getNextURI().toString()):b("goURI")(a,c,d)}c={redirectPageTo:b("killswitch")("PREVENT_INFINITE_URL_REDIRECT")?b("goURI"):a,reloadPage:b("ReloadPage").now};e.exports=c}),null);
__d("ComposerDialogEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STATUS:"status",PHOTO:"photo",PHOTO_UPLOAD:"photo_upload",SOCIAL_CANVAS:"social_canvas"})}),null);
__d("ProfilePhotoActionLogger",["Banzai"],(function(a,b,c,d,e,f){a={EVENT_SELECT_METHOD:"select_method",EVENT_CAMERA_PERMISSION_PROVIDED:"permission_provided",EVENT_CAMERA_PERMISSION_DENIED:"permission_denied",EVENT_CAMERA_NO_WEBCAM:"permission_denied",EVENT_CAMERA_UNKNOWN_MEDIASTREAM_ERROR:"unknown_mediastream_error",EVENT_CAMERA_TAKE_PHOTO:"take_photo",EVENT_CAMERA_RETAKE_PHOTO:"retake_photo",EVENT_CAMERA_UPLOAD_ATTEMPT:"upload_attempt",EVENT_CAMERA_UPLOAD_ERROR:"upload_error",EVENT_CAMERA_UPLOAD_SUCCESS:"upload_success",SOURCE_SUGGESTIONS:"suggestions",SOURCE_TIMELINE:"timeline",SOURCE_NUX:"nux",METHOD_EXISTING:"existing",METHOD_UPLOAD:"upload",METHOD_CAMERA:"camera",log:function(a,c,d){b("Banzai").post("profile_photo_action",{event:a,source:c,method:d})}};e.exports=a}),null);
__d("TimelineProfilePicConfig",["fbt"],(function(a,b,c,d,e,f,g){a={loading:"timeline/profile_pic/loading",success:"timeline/profile_pic/success",leavingMessage:g._("Your profile picture is still uploading, are you sure you want to leave?")};e.exports=a}),null);
__d("ProfilePictureFlowLogging",["Arbiter","Banzai","Event","Parent","ProfilePhotoActionLogger","Run","TimelineProfilePicConfig","TimelineProfilePictureLoggerEnums","tidyEvent"],(function(a,b,c,d,e,f){__p&&__p();var g=b("TimelineProfilePicConfig").loading,h=b("TimelineProfilePicConfig").success,i="data-action-type",j=void 0,k=void 0,l=void 0,m=void 0;function n(){m&&m.unsubscribe(),m=null}var o={action:b("TimelineProfilePictureLoggerEnums").actions,flow:b("TimelineProfilePictureLoggerEnums").flows,step:b("TimelineProfilePictureLoggerEnums").steps,log:function(a){var c=a||o.step.INIT;b("Banzai").post("profile_pic_action",{action_type:j,flow_type:k,step_type:c});j===o.action.UPLOAD&&c===o.step.INIT&&b("ProfilePhotoActionLogger").log(b("ProfilePhotoActionLogger").EVENT_SELECT_METHOD,l,b("ProfilePhotoActionLogger").METHOD_UPLOAD);k=null;(a==="success"||a==="fail")&&(j=null);return o},setAction:function(a){j=a;return o},setFlowType:function(a){k=a;return o},setSource:function(a){l=a;return o},init:function(a,c){c&&(l=c),m||(m=b("Arbiter").subscribe([g,h],function(a){o.log(a===g?b("TimelineProfilePictureLoggerEnums").steps.LOADING:b("TimelineProfilePictureLoggerEnums").steps.SUCCESS)}),b("Run").onLeave(n)),b("tidyEvent")(b("Event").listen(a,"click",function(a){a=b("Parent").byAttribute(a.getTarget(),i);if(!a)return;o.setAction(a.getAttribute(i)).log()}))},initMenuItems:function(a,b,c){o.init(a.getRoot(),c)}};e.exports=o}),null);
__d("XWorkNewsfeedNuxNextStepController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/newsfeed_nux/next_step/",{})}),null);
__d("ProfilePicCropViewerInit",["Bootloader","CurrentCommunity","ProfilePictureFlowLogging","React","ServerRedirect","XWorkNewsfeedNuxNextStepController"],(function(a,b,c,d,e,f){__p&&__p();var g="profile-picture-crop",h="loading",i=b("ProfilePictureFlowLogging").flow,j=void 0,k=void 0;function l(){k&&k.close()}function m(a,c,d){__p&&__p();d=d||{};b("Bootloader").loadModules(["SpotlightViewerInit","ZoomProfilePicCropViewer.react","PhotoStore","AsyncRequest","AsyncResponse","XProfilePicCropViewerAsyncController"],function(e,f,i,m,n,o){__p&&__p();l();var p=d.stickerID;j=g+":"+a+":"+c;p&&(j+=":"+p);var q=d.successCallback,r=b("CurrentCommunity").getID()!=="0";!q&&(d.source==="atwork_nux"||d.source==="timeline"||d.source==="atwork_profile_nux")&&r&&(q=function(a){a=b("XWorkNewsfeedNuxNextStepController").getURIBuilder().getURI();new m().setURI(a).setData({current_step_id:1,skipped:!1}).setHandler(function(){b("ServerRedirect").reloadPage()}).send()});if(!d.skipCropping){r=function(){__p&&__p();k=e.render(b("React").createElement(f,{cancelCallback:d.cancelCallback,cropMode:d.cropMode,errorCallback:d.errorCallback,method:d.method,open:!0,photoID:a,profileID:c,setid:j,source:d.source,successCallback:q,uploadRequest:d.uploadRequest,warnOnCancel:d.warnOnCancel}),function(){k=null});if(i.hasBeenCreated(j)||a===h)return{v:void 0};var g=o.getURIBuilder().setString("photo_id",a).setInt("profile_id",c).setString("set_id",j).setBool("will_load_more_photos",!0);p&&g.setInt("sticker_id",p);g=g.getURI();var r=j;new m(g).setErrorHandler(function(a){r===j&&l(),n.defaultErrorHandler(a)}).send()}();if(typeof r==="object")return r.v}},"ProfilePicCropViewerInit");return!0}a={close:l,getFlowType:function(){return i.ZOOMCROP},useCropViewer:function(){return!0},loading:function(a,b){m(h,a,b)},loadID:m};e.exports=a}),null);
__d("PagePhotosTabPostByOthersPhotoGrids.react",["cx","PagePhotosTabConfig","PagePhotosTabPhotoGridItem.react","PagePhotosTabPhotosView.react","PagesEventObserver","PagesEventType","React","RelayClassic_DEPRECATED","XUICard.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=function(){this.props.relay.setVariables({count:this.props.relay.variables.count+b("PagePhotosTabConfig").NUM_EACH_LOAD_MORE})}.bind(this),this.$1=function(){b("PagesEventObserver").notify(b("PagesEventType").SOCIAL_CONTEXT_PHOTOS_VIEW_IMPRESSION,this.props.page.id)}.bind(this),c}a.prototype.render=function(){this.$1();var a=this.props.page,c=a.id;a=a.photos_by_others;return b("React").createElement("div",{className:"_2fho"},b("React").createElement(b("PagePhotosTabPhotosView.react"),{hasMore:this.props.relay.variables.count<a.count,onLoadMore:this.$2,pageID:c,photos:a}))};d=b("RelayClassic_DEPRECATED").createContainer(a,{initialVariables:{count:b("PagePhotosTabConfig").NUM_FIRST_LOAD},fragments:{page:function(){return function(a){return{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallVariable",callVariableName:"count"}}],children:[{fieldName:"count",kind:"Field",metadata:{},type:"Int"},{children:[{children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},b("RelayClassic_DEPRECATED").QL.__frag(a)]),fieldName:"node",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:!0},type:"Photo"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"PhotosByOthersEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:!0,isGenerated:!0,isRequisite:!0},type:"PageInfo"}],fieldName:"photos_by_others",kind:"Field",metadata:{canHaveSubselections:!0,isConnection:!0,isFindable:!0},type:"PhotosByOthersConnection"}],id:b("RelayClassic_DEPRECATED").QL.__id(),kind:"Fragment",metadata:{},name:"PagePhotosTabPostByOthersPhotoGrids_PageRelayQL",type:"Page"}}(b("PagePhotosTabPhotoGridItem.react").getFragment("photo"))}}});d.moduleName="PagePhotosTabPostByOthersPhotoGrids.react";e.exports=d}),null);
__d("XComposerDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/composer/dialog/",{entry_point:{type:"Enum",required:!0,enumType:1},entry_point_ref:{type:"Enum",required:!0,enumType:1},target_id:{type:"Int"},client_ref:{type:"String"},privacy_option_id:{type:"String"},whitelisted_target_ids:{type:"IntVector"},extra_info:{type:"StringToStringMap"},__asyncDialog:{type:"Int"}})}),null);
__d("PagePhotosTabPhotosPostByOthersView.react",["ix","cx","fbt","ComposerDialogEntryPoint","ComposerEntryPointRef","ComposerXMediaUploadHandler","FileInput.react","Image.react","Link.react","MediaPageRoute","PagePhotosTabPostByOthersPhotoGrids.react","React","ReactDOM","Spotlight.react","XComposerDialogController","XUIText.react","fbglyph","react-relay/classic/container/RelayRootContainer"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.componentDidMount=function(){var a=b("XComposerDialogController").getURIBuilder().setInt("target_id",this.props.pageID).setEnum("entry_point",b("ComposerDialogEntryPoint").PHOTO_UPLOAD).setEnum("entry_point_ref",b("ComposerEntryPointRef").ADD_PHOTO_IN_PHOTOS_SECTION).getURI();b("ComposerXMediaUploadHandler").setupFileUploadToComposerDialog(this.refs.fileInput.getFileInput(),a.toString(),"_42fr",!0);this.refs.spotlight.layer.subscribe("hide",this.$1.bind(this))};a.prototype.render=function(){var a=new(b("MediaPageRoute"))({name:this.props.pageName,page_id:this.props.pageID});return b("React").createElement(b("Spotlight.react"),{ref:"spotlight",shown:!0},b("React").createElement("div",{className:"_549t"},b("React").createElement("div",{className:"_54au"})),b("React").createElement("div",{className:"_n3 _2y_h"},b("React").createElement("div",{className:"_54av"},b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_50u5",display:"block",size:"header3"},i._("All Photos By Other People"))),b("React").createElement("div",{className:"_54aw"},b("React").createElement(b("FileInput.react"),{accept:"image/*",multiple:!1,ref:"fileInput"},b("React").createElement(b("Link.react"),{href:"#"},b("React").createElement(b("Image.react"),{className:"_390_",src:g("140153")}),b("React").createElement(b("XUIText.react"),{className:"_50u5 _2pis",shade:"medium",size:"header4"},i._("Add a Photo")))))),b("React").createElement(b("react-relay/classic/container/RelayRootContainer"),{Component:b("PagePhotosTabPostByOthersPhotoGrids.react"),route:a})))};a.prototype.$1=function(){b("ReactDOM").unmountComponentAtNode(this.props.root)};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("PagePhotosTabInitPostByOthersLayer",["DOM","Event","PagePhotosTabPhotosPostByOthersView.react","React","ReactDOM"],(function(a,b,c,d,e,f){a={init:function(a,c,d){b("Event").listen(a,"click",function(){var a=b("DOM").create("div");b("ReactDOM").render(b("React").createElement(b("PagePhotosTabPhotosPostByOthersView.react"),{pageID:c,pageName:d,root:a}),a)})}};e.exports=a}),null);