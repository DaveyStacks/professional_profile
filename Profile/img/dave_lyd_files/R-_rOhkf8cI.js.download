if (self.CavalryLogger) { CavalryLogger.start_js(["PtBVj"]); }

__d("MqttWsClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MqttWsClientLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MqttWsClientLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MqttWsClientLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setDeltasInBatch=function(a){this.$1.deltas_in_batch=a;return this};a.prototype.setFirstSeqID=function(a){this.$1.first_seq_id=a;return this};a.prototype.setLastSeqID=function(a){this.$1.last_seq_id=a;return this};a.prototype.setSeqID=function(a){this.$1.seq_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={deltas_in_batch:!0,first_seq_id:!0,last_seq_id:!0,seq_id:!0,vc:!0};e.exports=a}),null);
__d("PresmaUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PresmaUsageLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PresmaUsageLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PresmaUsageLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setBusinessID=function(a){this.$1.business_id=a;return this};a.prototype.setUsageEvent=function(a){this.$1.usage_event=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={business_id:!0,usage_event:!0,vc:!0};e.exports=a}),null);
__d("MqttLogger",["BanzaiODS","Log","LogHistory","MarauderLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="mqtt_client",h=null,i={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish"};j.getInstance=function(){h||(h=new j());return h};function j(){this.$1=b("LogHistory").getInstance(g),this.$2=null}j.prototype.setAppId=function(a){this.$2||(this.$2=a)};j.prototype.logConnect=function(a){this.bumpCounter(i.CONNECT+"."+a.status),this.$3(i.CONNECT,a)};j.prototype.logDisconnect=function(a){this.bumpCounter(i.DISCONNECT),this.$3(i.DISCONNECT,a)};j.prototype.logPublish=function(a){this.bumpCounter(i.PUBLISH+"."+a.topic),this.$3(i.PUBLISH,a)};j.prototype.logError=function(event,a){var b="";a.message&&(b+=a.message+"\n");a.stack&&(b+=a.stack);this.$1.error(event,b)};j.prototype.debugTrace=function(event,a){this.$1.debug(event,a)};j.prototype.bumpCounter=function(a){this.$2&&b("BanzaiODS").bumpEntityKey("mqtt_ws_client",this.$2+"."+a),b("BanzaiODS").bumpEntityKey("mqtt_ws_client",a)};j.prototype.$3=function(event,a){a.user_agent=navigator.userAgent;a.platform=navigator.platform;a.href=window.location.href;var c=JSON.stringify(a);this.$1.log(event,c);b("MarauderLogger").log(event,g,a)};e.exports=j}),null);
/**
 * License: https://www.facebook.com/legal/license/-SPK4hgBf7r/
 */
__d("paho-mqtt",[],(function(a,b,c,d,e,f){__p&&__p();(function(a,b){typeof f==="object"&&typeof e==="object"?e.exports=b():typeof define==="function"&&define.amd?define(b):typeof f==="object"?f=b():(typeof a.Paho==="undefined"&&(a.Paho={}),a.Paho.MQTT=b())})(this,function(){__p&&__p();var b=function(b){__p&&__p();var c="@VERSION@",d={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},e=function(a,b){__p&&__p();for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(Object.prototype.hasOwnProperty.call(b,c)){if(typeof a[c]!==b[c])throw new Error(i(g.INVALID_TYPE,[typeof a[c],c]))}else{var d="Unknown property, "+c+". Valid properties are:";for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d=d+" "+e);throw new Error(d)}},f=function(a,b){return function(){return a.apply(b,arguments)}},g={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed: code {0} reason {1} wasClean {2}."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},h={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},i=function(a,b){__p&&__p();a=a.text;if(b){var c,d;for(var e=0;e<b.length;e++){c="{"+e+"}";d=a.indexOf(c);if(d>0){var f=a.substring(0,d);d=a.substring(d+c.length);a=f+b[e]+d}}}return a},j=[0,6,77,81,73,115,100,112,3],k=[0,4,77,81,84,84,4],l=function(a,b){this.type=a;for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(this[c]=b[c])};l.prototype.encode=function(){__p&&__p();var a=(this.type&15)<<4,b=0,c=[],e=0,f;this.messageIdentifier!==undefined&&(b+=2);switch(this.type){case d.CONNECT:switch(this.mqttVersion){case 3:b+=j.length+3;break;case 4:b+=k.length+3;break}b+=r(this.clientId)+2;this.willMessage!==undefined&&(b+=r(this.willMessage.destinationName)+2,f=this.willMessage.payloadBytes,f instanceof Uint8Array||(f=new Uint8Array(h)),b+=f.byteLength+2);this.userName!==undefined&&(b+=r(this.userName)+2);this.password!==undefined&&(b+=r(this.password)+2);break;case d.SUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=r(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case d.UNSUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=r(this.topics[g]),b+=c[g]+2;break;case d.PUBREL:a|=2;break;case d.PUBLISH:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&(a|=1);e=r(this.payloadMessage.destinationName);b+=e+2;var h=this.payloadMessage.payloadBytes;b+=h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer));break;case d.DISCONNECT:break;default:break}var i=q(b),l=i.length+1;b=new ArrayBuffer(b+l);var m=new Uint8Array(b);m[0]=a;m.set(i,1);if(this.type==d.PUBLISH)l=o(this.payloadMessage.destinationName,e,m,l);else if(this.type==d.CONNECT){switch(this.mqttVersion){case 3:m.set(j,l);l+=j.length;break;case 4:m.set(k,l);l+=k.length;break}a=0;this.cleanSession&&(a=2);this.willMessage!==undefined&&(a|=4,a|=this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));this.userName!==undefined&&(a|=128);this.password!==undefined&&(a|=64);m[l++]=a;l=n(this.keepAliveInterval,m,l)}this.messageIdentifier!==undefined&&(l=n(this.messageIdentifier,m,l));switch(this.type){case d.CONNECT:l=o(this.clientId,r(this.clientId),m,l);this.willMessage!==undefined&&(l=o(this.willMessage.destinationName,r(this.willMessage.destinationName),m,l),l=n(f.byteLength,m,l),m.set(f,l),l+=f.byteLength);this.userName!==undefined&&(l=o(this.userName,r(this.userName),m,l));this.password!==undefined&&(l=o(this.password,r(this.password),m,l));break;case d.PUBLISH:m.set(h,l);break;case d.SUBSCRIBE:for(var g=0;g<this.topics.length;g++)l=o(this.topics[g],c[g],m,l),m[l++]=this.requestedQos[g];break;case d.UNSUBSCRIBE:for(var g=0;g<this.topics.length;g++)l=o(this.topics[g],c[g],m,l);break;default:}return b};function m(a,b){__p&&__p();var c=b,e=a[b],f=e>>4;e=e&=15;b+=1;var g,h=0,i=1;do{if(b==a.length)return[null,c];g=a[b++];h+=(g&127)*i;i*=128}while((g&128)!==0);g=b+h;if(g>a.length)return[null,c];i=new l(f);switch(f){case d.CONNACK:h=a[b++];h&1&&(i.sessionPresent=!0);i.returnCode=a[b++];break;case d.PUBLISH:c=e>>1&3;f=p(a,b);b+=2;h=t(a,b,f);b+=f;c>0&&(i.messageIdentifier=p(a,b),b+=2);f=new y(a.subarray(b,g));(e&1)==1&&(f.retained=!0);(e&8)==8&&(f.duplicate=!0);f.qos=c;f.destinationName=h;i.payloadMessage=f;break;case d.PUBACK:case d.PUBREC:case d.PUBREL:case d.PUBCOMP:case d.UNSUBACK:i.messageIdentifier=p(a,b);break;case d.SUBACK:i.messageIdentifier=p(a,b);b+=2;i.returnCode=a.subarray(b,g);break;default:break}return[i,g]}function n(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function o(a,b,c,d){d=n(b,c,d);s(a,c,d);return d+b}function p(a,b){return 256*a[b]+a[b+1]}function q(a){var b=new Array(1),c=0;do{var d=a%128;a=a>>7;a>0&&(d|=128);b[c++]=d}while(a>0&&c<4);return b}function r(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d>2047?(55296<=d&&d<=56319&&(c++,b++),b+=3):d>127?b+=2:b++}return b}function s(a,b,c){__p&&__p();c=c;for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);if(55296<=e&&e<=56319){var f=a.charCodeAt(++d);if(isNaN(f))throw new Error(i(g.MALFORMED_UNICODE,[e,f]));e=(e-55296<<10)+(f-56320)+65536}e<=127?b[c++]=e:e<=2047?(b[c++]=e>>6&31|192,b[c++]=e&63|128):e<=65535?(b[c++]=e>>12&15|224,b[c++]=e>>6&63|128,b[c++]=e&63|128):(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128,b[c++]=e>>6&63|128,b[c++]=e&63|128)}return b}function t(a,b,c){__p&&__p();var d="",e,f=b;while(f<b+c){var h=a[f++];if(h<128)e=h;else{var j=a[f++]-128;if(j<0)throw new Error(i(g.MALFORMED_UTF,[h.toString(16),j.toString(16),""]));if(h<224)e=64*(h-192)+j;else{var k=a[f++]-128;if(k<0)throw new Error(i(g.MALFORMED_UTF,[h.toString(16),j.toString(16),k.toString(16)]));if(h<240)e=4096*(h-224)+64*j+k;else{var l=a[f++]-128;if(l<0)throw new Error(i(g.MALFORMED_UTF,[h.toString(16),j.toString(16),k.toString(16),l.toString(16)]));if(h<248)e=262144*(h-240)+4096*j+64*k+l;else throw new Error(i(g.MALFORMED_UTF,[h.toString(16),j.toString(16),k.toString(16),l.toString(16)]))}}}e>65535&&(e-=65536,d+=String.fromCharCode(55296+(e>>10)),e=56320+(e&1023));d+=String.fromCharCode(e)}return d}var u=function(a,b,c){__p&&__p();this._client=a;this._window=b;this._keepAliveInterval=c*1e3;this.isReset=!1;var e=new l(d.PINGREQ).encode(),f=function(a){return function(){return h.apply(a)}},h=function(){!this.isReset?(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(g.PING_TIMEOUT.code,i(g.PING_TIMEOUT))):(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(e),this.timeout=this._window.setTimeout(f(this),this._keepAliveInterval))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(f(this),this._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},v=function(a,b,c,d,e){this._window=b;c||(c=30);b=function(b,a,c){return function(){return b.apply(a,c)}};this.timeout=setTimeout(b(d,a,e),c*1e3);this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(a,c,d,e,f){__p&&__p();if(!("WebSocket"in b&&b.WebSocket!==null))throw new Error(i(g.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in b&&b.localStorage!==null))throw new Error(i(g.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in b&&b.ArrayBuffer!==null))throw new Error(i(g.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",a,c,d,e,f);this.host=c;this.port=d;this.path=e;this.uri=a;this.clientId=f;this._wsuri=null;this._localKey=c+":"+d+(e!="/mqtt"?":"+e:"")+":"+f+":";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0;for(var h in localStorage)(h.indexOf("Sent:"+this._localKey)===0||h.indexOf("Received:"+this._localKey)===0)&&this.restore(h)};w.prototype.host=null;w.prototype.port=null;w.prototype.path=null;w.prototype.uri=null;w.prototype.clientId=null;w.prototype.socket=null;w.prototype.connected=!1;w.prototype.maxMessageIdentifier=65536;w.prototype.connectOptions=null;w.prototype.hostIndex=null;w.prototype.onConnected=null;w.prototype.onConnectionLost=null;w.prototype.onMessageDelivered=null;w.prototype.onMessageArrived=null;w.prototype.traceFunction=null;w.prototype._msg_queue=null;w.prototype._buffered_msg_queue=null;w.prototype._connectTimeout=null;w.prototype.sendPinger=null;w.prototype.receivePinger=null;w.prototype._reconnectInterval=1;w.prototype._reconnecting=!1;w.prototype._reconnectTimeout=null;w.prototype.disconnectedPublishing=!1;w.prototype.disconnectedBufferSize=5e3;w.prototype.receiveBuffer=null;w.prototype._traceBuffer=null;w.prototype._MAX_TRACE_ENTRIES=100;w.prototype.connect=function(a){__p&&__p();var b=this._traceMask(a,"password");this._trace("Client.connect",b,this.socket,this.connected);if(this.connected)throw new Error(i(g.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(i(g.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};w.prototype.subscribe=function(a,b){__p&&__p();this._trace("Client.subscribe",a,b);if(!this.connected)throw new Error(i(g.INVALID_STATE,["not connected"]));var c=new l(d.SUBSCRIBE);c.topics=[a];b.qos!==undefined?c.requestedQos=[b.qos]:c.requestedQos=[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:i(a)})});b.timeout&&(c.timeOut=new v(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:g.SUBSCRIBE_TIMEOUT.code,errorMessage:i(g.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};w.prototype.unsubscribe=function(a,b){__p&&__p();this._trace("Client.unsubscribe",a,b);if(!this.connected)throw new Error(i(g.INVALID_STATE,["not connected"]));var c=new l(d.UNSUBSCRIBE);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new v(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:g.UNSUBSCRIBE_TIMEOUT.code,errorMessage:i(g.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};w.prototype.send=function(a){this._trace("Client.send",a),wireMessage=new l(d.PUBLISH),wireMessage.payloadMessage=a,a.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage)};w.prototype.disconnect=function(){this._trace("Client.disconnect");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw new Error(i(g.INVALID_STATE,["not connecting or connected"]));wireMessage=new l(d.DISCONNECT);this._notify_msg_sent[wireMessage]=f(this._disconnected,this);this._schedule_message(wireMessage)};w.prototype.getTraceLog=function(){if(this._traceBuffer!==null){this._trace("Client.getTraceLog",new Date());this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var a in this._sentMessages)this._trace("_sentMessages ",a,this._sentMessages[a]);for(var a in this._receivedMessages)this._trace("_receivedMessages ",a,this._receivedMessages[a]);return this._traceBuffer}};w.prototype.startTrace=function(){this._traceBuffer===null&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date(),c)};w.prototype.stopTrace=function(){delete this._traceBuffer};w.prototype._doConnect=function(a){__p&&__p();if(this.connectOptions.useSSL){var b=a.split(":");b[0]="wss";a=b.join(":")}this._wsuri=a;this.connected=!1;this.connectOptions.ignoreSubProtocol?this.socket=new WebSocket(a):this.connectOptions.mqttVersion<4?this.socket=new WebSocket(a,["mqttv3.1"]):this.socket=new WebSocket(a,["mqtt"]);this.socket.binaryType="arraybuffer";this.socket.onopen=f(this._on_socket_open,this);this.socket.onmessage=f(this._on_socket_message,this);this.socket.onerror=f(this._on_socket_error,this);this.socket.onclose=f(this._on_socket_close,this);this.sendPinger=new u(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new u(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new v(this,window,this.connectOptions.timeout,this._disconnected,[g.CONNECT_TIMEOUT.code,i(g.CONNECT_TIMEOUT)])};w.prototype._schedule_message=function(a){this._msg_queue.push(a),this.connected&&this._process_queue()};w.prototype.store=function(a,b){};w.prototype.restore=function(a){};w.prototype._process_queue=function(){var a=null,b=this._msg_queue.reverse();while(a=b.pop())this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};w.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error("Too many messages:"+b);while(this._sentMessages[this._message_identifier]!==undefined)this._message_identifier++;a.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;a.type===d.PUBLISH&&this.store("Sent:",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};w.prototype._on_socket_open=function(){var a=new l(d.CONNECT,this.connectOptions);a.clientId=this.clientId;this._socket_send(a);this.connected=!0;this.connectOptions.onSocketOpen&&this.connectOptions.onSocketOpen()};w.prototype._on_socket_message=function(event){this._trace("Client._on_socket_message",event.data);var a=this._deframeMessages(event.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};w.prototype._deframeMessages=function(a){__p&&__p();a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{c=0;while(c<a.length){var d=m(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}c<a.length&&(this.receiveBuffer=a.subarray(c))}catch(a){d=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(g.INTERNAL_ERROR.code,i(g.INTERNAL_ERROR,[a.message,d]));return}return b};w.prototype._handleMessage=function(a){__p&&__p();this._trace("Client._handleMessage",a);try{switch(a.type){case d.CONNACK:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();if(this.connectOptions.cleanSession){for(var b in this._sentMessages){var c=this._sentMessages[b];localStorage.removeItem("Sent:"+this._localKey+c.messageIdentifier)}this._sentMessages={};for(var b in this._receivedMessages){var e=this._receivedMessages[b];localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier)}this._receivedMessages={}}if(a.returnCode===0)this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this.connected=!1;this._disconnected(g.CONNACK_RETURNCODE.code,i(g.CONNACK_RETURNCODE,[a.returnCode,h[a.returnCode]]));break}var f=[];for(var j in this._sentMessages)Object.prototype.hasOwnProperty.call(this._sentMessages,j)&&f.push(this._sentMessages[j]);if(this._buffered_msg_queue.length>0){var k=null,m=this._buffered_msg_queue.reverse();while(k=m.pop())f.push(k),this.onMessageDelivered&&(this._notify_msg_sent[k]=this.onMessageDelivered(k.payloadMessage))}var f=f.sort(function(a,b){return a.sequence-b.sequence});for(var m=0,k=f.length;m<k;m++){var c=f[m];if(c.type==d.PUBLISH&&c.pubRecReceived){var n=new l(d.PUBREL,{messageIdentifier:c.messageIdentifier});this._schedule_message(n)}else this._schedule_message(c)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});m=!1;this._reconnecting&&(m=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(m,this._wsuri);this._process_queue();break;case d.PUBLISH:this._receivePublish(a);break;case d.PUBACK:var c=this._sentMessages[a.messageIdentifier];c&&(delete this._sentMessages[a.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+a.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(c.payloadMessage));break;case d.PUBREC:var c=this._sentMessages[a.messageIdentifier];if(c){c.pubRecReceived=!0;var n=new l(d.PUBREL,{messageIdentifier:a.messageIdentifier});this.store("Sent:",c);this._schedule_message(n)}break;case d.PUBREL:var e=this._receivedMessages[a.messageIdentifier];localStorage.removeItem("Received:"+this._localKey+a.messageIdentifier);e&&(this._receiveMessage(e),delete this._receivedMessages[a.messageIdentifier]);k=new l(d.PUBCOMP,{messageIdentifier:a.messageIdentifier});this._schedule_message(k);break;case d.PUBCOMP:var c=this._sentMessages[a.messageIdentifier];delete this._sentMessages[a.messageIdentifier];localStorage.removeItem("Sent:"+this._localKey+a.messageIdentifier);this.onMessageDelivered&&this.onMessageDelivered(c.payloadMessage);break;case d.SUBACK:var c=this._sentMessages[a.messageIdentifier];c&&(c.timeOut&&c.timeOut.cancel(),a.returnCode[0]===128?c.onFailure&&c.onFailure(a.returnCode):c.onSuccess&&c.onSuccess(a.returnCode),delete this._sentMessages[a.messageIdentifier]);break;case d.UNSUBACK:var c=this._sentMessages[a.messageIdentifier];c&&(c.timeOut&&c.timeOut.cancel(),c.callback&&c.callback(),delete this._sentMessages[a.messageIdentifier]);break;case d.PINGRESP:this.sendPinger.reset();break;case d.DISCONNECT:this._disconnected(g.INVALID_MQTT_MESSAGE_TYPE.code,i(g.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(g.INVALID_MQTT_MESSAGE_TYPE.code,i(g.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(a){f=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(g.INTERNAL_ERROR.code,i(g.INTERNAL_ERROR,[a.message,f]));return}};w.prototype._on_socket_error=function(a){this._reconnecting||this._disconnected(g.SOCKET_ERROR.code,i(g.SOCKET_ERROR,[a.data]))};w.prototype._on_socket_close=function(event){this._reconnecting||this._disconnected(g.SOCKET_CLOSE.code,i(g.SOCKET_CLOSE,event!=null?[event.code,event.reason,event.wasClean]:[]))};w.prototype._socket_send=function(a){if(a.type==1){var b=this._traceMask(a,"password");this._trace("Client._socket_send",b)}else this._trace("Client._socket_send",a);this.socket.send(a.encode());this.sendPinger.reset()};w.prototype._receivePublish=function(a){__p&&__p();switch(a.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(a);break;case 1:var b=new l(d.PUBACK,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store("Received:",a);b=new l(d.PUBREC,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}};w.prototype._receiveMessage=function(a){this.onMessageArrived&&this.onMessageArrived(a.payloadMessage)};w.prototype._connected=function(a,b){this.onConnected&&this.onConnected(a,b)};w.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=this._reconnectInterval*2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};w.prototype._disconnected=function(a,b){__p&&__p();this._trace("Client._disconnected",a,b);if(a!==undefined&&this._reconnecting){this._reconnectTimeout=new v(this,window,this._reconnectInterval,this._reconnect);return}this.sendPinger.cancel();this.receivePinger.cancel();this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._msg_queue=[];this._buffered_msg_queue=[];this._notify_msg_sent={};this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.readyState===1&&this.socket.close(),delete this.socket);if(this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else{a===undefined&&(a=g.OK.code,b=i(g.OK));if(this.connected){this.connected=!1;this.onConnectionLost&&this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});if(a!==g.OK.code&&this.connectOptions.reconnect){this._reconnectInterval=1;this._reconnect();return}}else this.connectOptions.mqttVersion===4&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b})}};w.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)typeof arguments[a]!=="undefined"&&arguments.splice(a,1,JSON.stringify(arguments[a]));var b=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:b})}if(this._traceBuffer!==null)for(var a=0,c=arguments.length;a<c;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),a===0?this._traceBuffer.push(arguments[a]):typeof arguments[a]==="undefined"?this._traceBuffer.push(arguments[a]):this._traceBuffer.push("  "+JSON.stringify(arguments[a]))};w.prototype._traceMask=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(d==b?c[d]="******":c[d]=a[d]);return c};var x=function(a,b,c,d){__p&&__p();var f;if(typeof a!=="string")throw new Error(i(g.INVALID_TYPE,[typeof a,"host"]));if(arguments.length==2){d=b;f=a;var h=f.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(h)a=h[4]||h[2],b=parseInt(h[7]),c=h[8];else throw new Error(i(g.INVALID_ARGUMENT,[a,"host"]))}else{arguments.length==3&&(d=c,c="/mqtt");if(typeof b!=="number"||b<0)throw new Error(i(g.INVALID_TYPE,[typeof b,"port"]));if(typeof c!=="string")throw new Error(i(g.INVALID_TYPE,[typeof c,"path"]));var j=a.indexOf(":")!==-1&&a.slice(0,1)!=="["&&a.slice(-1)!=="]";f="ws://"+(j?"["+a+"]":a)+":"+b+c}var k=0;for(var l=0;l<d.length;l++){var m=d.charCodeAt(l);55296<=m&&m<=56319&&l++;k++}if(typeof d!=="string"||k>65535)throw new Error(i(g.INVALID_ARGUMENT,[d,"clientId"]));var n=new w(f,a,b,c,d);this._getHost=function(){return a};this._setHost=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getPort=function(){return b};this._setPort=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getPath=function(){return c};this._setPath=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getURI=function(){return f};this._setURI=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getClientId=function(){return n.clientId};this._setClientId=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getOnConnected=function(){return n.onConnected};this._setOnConnected=function(a){if(typeof a==="function")n.onConnected=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onConnected"]))};this._getDisconnectedPublishing=function(){return n.disconnectedPublishing};this._setDisconnectedPublishing=function(a){n.disconnectedPublishing=a};this._getDisconnectedBufferSize=function(){return n.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){n.disconnectedBufferSize=a};this._getConnectOptions=function(){return n.connectOptions};this._getOnConnectionLost=function(){return n.onConnectionLost};this._setOnConnectionLost=function(a){if(typeof a==="function")n.onConnectionLost=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onConnectionLost"]))};this._getOnMessageDelivered=function(){return n.onMessageDelivered};this._setOnMessageDelivered=function(a){if(typeof a==="function")n.onMessageDelivered=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onMessageDelivered"]))};this._getOnMessageArrived=function(){return n.onMessageArrived};this._setOnMessageArrived=function(a){if(typeof a==="function")n.onMessageArrived=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onMessageArrived"]))};this._getTrace=function(){return n.traceFunction};this._setTrace=function(a){if(typeof a==="function")n.traceFunction=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onTrace"]))};this.connect=function(d){__p&&__p();d=d||{};e(d,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",onSocketOpen:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",ignoreSubProtocol:"boolean",uris:"object"});d.keepAliveInterval===undefined&&(d.keepAliveInterval=60);if(d.mqttVersion>4||d.mqttVersion<3)throw new Error(i(g.INVALID_ARGUMENT,[d.mqttVersion,"connectOptions.mqttVersion"]));d.mqttVersion===undefined?(d.mqttVersionExplicit=!1,d.mqttVersion=4):d.mqttVersionExplicit=!0;if(d.password!==undefined&&d.userName===undefined)throw new Error(i(g.INVALID_ARGUMENT,[d.password,"connectOptions.password"]));if(d.willMessage){if(!(d.willMessage instanceof y))throw new Error(i(g.INVALID_TYPE,[d.willMessage,"connectOptions.willMessage"]));d.willMessage.stringPayload=null;if(typeof d.willMessage.destinationName==="undefined")throw new Error(i(g.INVALID_TYPE,[typeof d.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}typeof d.cleanSession==="undefined"&&(d.cleanSession=!0);if(d.hosts){if(!(d.hosts instanceof Array))throw new Error(i(g.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));if(d.hosts.length<1)throw new Error(i(g.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));var h=!1;for(var b=0;b<d.hosts.length;b++){if(typeof d.hosts[b]!=="string")throw new Error(i(g.INVALID_TYPE,[typeof d.hosts[b],"connectOptions.hosts["+b+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(d.hosts[b])){if(b===0)h=!0;else if(!h)throw new Error(i(g.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}else if(h)throw new Error(i(g.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}if(!h){if(!d.ports)throw new Error(i(g.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(!(d.ports instanceof Array))throw new Error(i(g.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(d.hosts.length!==d.ports.length)throw new Error(i(g.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));d.uris=[];for(var b=0;b<d.hosts.length;b++){if(typeof d.ports[b]!=="number"||d.ports[b]<0)throw new Error(i(g.INVALID_TYPE,[typeof d.ports[b],"connectOptions.ports["+b+"]"]));h=d.hosts[b];var a=d.ports[b],j=h.indexOf(":")!==-1;f="ws://"+(j?"["+h+"]":h)+":"+a+c;d.uris.push(f)}}else d.uris=d.hosts}n.connect(d)};this.subscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};e(b,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(typeof b.qos!=="undefined"&&!(b.qos===0||b.qos===1||b.qos===2))throw new Error(i(g.INVALID_ARGUMENT,[b.qos,"subscribeOptions.qos"]));n.subscribe(a,b)};this.unsubscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};e(b,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");n.unsubscribe(a,b)};this.send=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof y)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(i(g.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));n.send(e)}else e=new y(b),e.destinationName=a,arguments.length>=3&&(e.qos=c),arguments.length>=4&&(e.retained=d),n.send(e)};this.publish=function(a,b,c,d){__p&&__p();!1;var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof y)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(i(g.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));n.send(e)}else e=new y(b),e.destinationName=a,arguments.length>=3&&(e.qos=c),arguments.length>=4&&(e.retained=d),n.send(e)};this.disconnect=function(){n.disconnect()};this.getTraceLog=function(){return n.getTraceLog()};this.startTrace=function(){n.startTrace()};this.stopTrace=function(){n.stopTrace()};this.isConnected=function(){return n.connected}};Object.defineProperties(x.prototype,{host:{get:function(){return this._getHost()},set:function(a){this._setHost(a)}},port:{get:function(){return this._getPort()},set:function(a){this._setPort(a)}},path:{get:function(){return this._getPath()},set:function(a){this._setPath(a)}},clientId:{get:function(){return this._getClientId()},set:function(a){this._setClientId(a)}},onConnected:{get:function(){return this._getOnConnected()},set:function(a){this._setOnConnected(a)}},disconnectedPublishing:{get:function(){return this._getDisconnectedPublishing()},set:function(a){this._setDisconnectedPublishing(a)}},disconnectedBufferSize:{get:function(){return this._getDisconnectedBufferSize()},set:function(a){this._setDisconnectedBufferSize(a)}},onConnectionLost:{get:function(){return this._getOnConnectionLost()},set:function(a){this._setOnConnectionLost(a)}},connectOptions:{get:function(){return this._getConnectOptions()}},onMessageDelivered:{get:function(){return this._getOnMessageDelivered()},set:function(a){this._setOnMessageDelivered(a)}},onMessageArrived:{get:function(){return this._getOnMessageArrived()},set:function(a){this._setOnMessageArrived(a)}},trace:{get:function(){return this._getTrace()},set:function(a){this._setTrace(a)}}});var y=function(a){__p&&__p();var b;if(typeof a==="string"||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw i(g.INVALID_ARGUMENT,[a,"newPayload"]);this._getPayloadString=function(){if(typeof b==="string")return b;else return t(b,0,b.length)};this._getPayloadBytes=function(){if(typeof b==="string"){var a=new ArrayBuffer(r(b));a=new Uint8Array(a);s(b,a,0);return a}else return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(typeof a==="string")c=a;else throw new Error(i(g.INVALID_ARGUMENT,[a,"newDestinationName"]))};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(a===0||a===1||a===2)d=a;else throw new Error("Invalid argument:"+a)};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(typeof a==="boolean")e=a;else throw new Error(i(g.INVALID_ARGUMENT,[a,"newRetained"]))};var f=!1;this._getDuplicate=function(){return f};this._setDuplicate=function(a){f=a}};Object.defineProperties(y.prototype,{payloadString:{get:function(){return this._getPayloadString()}},payloadBytes:{get:function(){return this._getPayloadBytes()}},destinationName:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},topic:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},qos:{get:function(){return this._getQos()},set:function(a){this._setQos(a)}},retained:{get:function(){return this._getRetained()},set:function(a){this._setRetained(a)}},duplicate:{get:function(){return this._getDuplicate()},set:function(a){this._setDuplicate(a)}}});return{Client:x,Message:y}}(window);return b})}),null);
__d("MqttConnection",["MqttLogger","Random","paho-mqtt"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=30,h="publish",i="subscribe",j=function(a){};function a(){this.$6=!1,this.$9=b("MqttLogger").getInstance(),this.$10="Disconnected",this.$15=new Set(),this.$16=new Set()}a.prototype.run=function(a){__p&&__p();var b=a.onStateChange,c=a.onError,d=a.onMessageReceived,e=a.endpoint,f=a.deviceId,g=a.userFbid,h=a.appId;a=a.subscribedTopics;if(this.$6){this.$9.logError("run","Run called while in running state.");return}this.$1=b;this.$2=c;this.$3=d;this.$4=e;this.$8=f;this.$11=g;this.$14=h;this.$6=!0;this.$12=0;a&&a.forEach(function(a){return this.$15.add(a)}.bind(this));this.$17()};a.prototype.shutdown=function(){this.$18(),this.$6=!1,this.$19("shutdown","Shutdown")};a.prototype.subscribe=function(a){this.$15.add(a);if(!this.$20(i))return!1;else{this.$5.subscribe(a,{});this.$19("subscribe","Subscribing to "+a);return!0}};a.prototype.publish=function(a,b,c){var d=this.$20(h),e;void 0;!this.$6?(this.$16.add({topic:a,payload:b,qos:c}),e="buffered"):(this.$5.publish(a,b,c,!1),e="published");this.$9.logPublish({topic:a,qos:c,conn_state:d?1:0,status:e});return d};a.prototype.isRunning=function(){return this.$6};a.prototype.$18=function(){this.$6&&this.$5&&(this.$21("Disconnected"),this.$5.onMessageArrived=j,this.$5.onConnectionLost=j,this.$5.connectOptions.onSuccess=j,this.$5.connectOptions.onFailure=j,this.$5.isConnected()&&this.$5.disconnect(),this.$5=null)};a.prototype.$21=function(a){a!==this.$10&&(this.$10=a,this.$1(a))};a.prototype.$17=function(){__p&&__p();if(!this.$6)return;this.$21("Connecting");this.$5=new(b("paho-mqtt").Client)(this.$4,"mqttwsclient");this.$7=this.$22();var a=Date.now(),c=Array.from(this.$15);this.$5.onConnectionLost=function(a){a.errorCode&&this.$9.logDisconnect({session:this.$7,errno:a.errorCode,err_str:a.errorMessage,session_duration:Date.now()-this.$13}),this.$23()}.bind(this);this.$5.onMessageArrived=function(a){this.$19("onMessageArrived","Message received on "+a.destinationName),this.$9.bumpCounter("message_arrived."+a.destinationName),this.$3(a.destinationName,a.payloadBytes)}.bind(this);this.$5.connect({userName:JSON.stringify({u:this.$11,s:this.$7,cp:1,ecp:0,chat_on:!0,fg:1,d:this.$24(),ct:"websocket",mqtt_sid:"",aid:this.$14,st:c,dc:""}),mqttVersion:3,password:"",keepAliveInterval:g,onFailure:function(b){this.$19("connect","Connect failed "+b.errorMessage),this.$25("failed",Date.now()-a,c,b.errorCode,b.errorMessage),this.$23()}.bind(this),onSuccess:function(){this.$19("connect","Connect success"),this.$25("success",Date.now()-a,c),this.$21("Connected"),this.$12=0,this.$13=Date.now(),this.$16.clear()}.bind(this),ignoreSubProtocol:!0,onSocketOpen:function(){return this.$26()}.bind(this)})};a.prototype.$26=function(){this.$16.forEach(function(a){this.$5&&this.$5.publish(a.topic,a.payload,a.qos)}.bind(this))};a.prototype.$23=function(){if(!this.$6)return;this.$18();this.$7=-1;var a=Math.pow(2,Math.min(this.$12,9))*(1e3+Math.random()*200);this.$19("_scheduleReconnect","Reconnect in "+a+" ms");setTimeout(function(){return this.$17()}.bind(this),a);this.$12+=1};a.prototype.$22=function(){return Math.floor((1+b("Random").random())*Number.MAX_SAFE_INTEGER)};a.prototype.$24=function(){return this.$8};a.prototype.$20=function(a){__p&&__p();if(!this.$6){this.$19("_ensureConnected","Mqtt connection: "+a+" called when not running");return!1}if(this.$5==null){this.$19("_ensureConnected","Mqtt connection: "+a+" called when not connected, ignored");return!1}if(this.$10!=="Connected"){this.$19("_ensureConnected","Mqtt connection: "+a+" called with connection state "+this.$10);return!1}var b=this.$5.isConnected();if(!b){this.$19("_ensureConnected","Mqtt connection: "+a+" called with client connection state "+b);return!1}return!0};a.prototype.$19=function(event,a){this.$9.debugTrace(event,"MQTT connection "+this.$7+": "+JSON.stringify(a))};a.prototype.$25=function(a,b,c,d,e){__p&&__p();var f={};f.status=a;f.session=this.$7;f.duration=Date.now()-b;f.hostname=this.$4;f.attempt_number=this.$12;f.subscribed_topics=c.join(", ");d&&(f.errno=d);e&&(f.err_str=e);this.$9.logConnect(f)};e.exports=a}),null);
__d("MqttChannel",["MqttConnection","MqttLogger","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1="",this.$2=[],this.$3="Disconnected",this.$4=new Map(),this.$8=b("MqttLogger").getInstance(),this.$7=new(b("MqttConnection"))(),this.$5=b("uuid")(),this.$6=new Set()}a.prototype.run=function(a){__p&&__p();var b=a.endpoint,c=a.userFbid,d=a.appId;a=a.subscribedTopics;if(this.$7.isRunning()){this.$9("run","Connection started calling run again");return}this.$8.setAppId(d);this.$1=b;this.$7.run({onStateChange:function(a){this.$10(a)}.bind(this),onError:function(a){this.$11("connection","Error "+a)}.bind(this),onMessageReceived:function(a,b){this.$12(a,b)}.bind(this),deviceId:this.$5,endpoint:b,userFbid:c,appId:d,subscribedTopics:a})};a.prototype.shutdown=function(){this.$7&&this.$7.shutdown()};a.prototype.publish=function(a,b){this.$7.publish(a,b,1)};a.prototype.subscribe=function(a,b){var c=this.$7.subscribe(a);c||this.$6.add(a);c=this.$4.get(a);!c?(c=[b],this.$4.set(a,c)):c.push(b)};a.prototype.subscribeChannelEvents=function(a){this.$2.push(a)};a.prototype.getDeviceId=function(){return this.$5};a.prototype.getConnectionState=function(){return this.$3};a.prototype.$12=function(a,b){__p&&__p();var c=this.$4.get(a);if(!c)this.$11("_onMessageReceived",a+" being dropped, no listeners");else for(var a=c,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e(b)}};a.prototype.$10=function(a){this.$3!=="Connected"&&a==="Connected"&&(this.$6.forEach(function(a){return this.$7.subscribe(a)}.bind(this)),this.$6.clear()),this.$3=a,this.$9("_changeState","Connection state = "+a),this.$13(a)};a.prototype.$13=function(a){__p&&__p();for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onMQTTStateChanged(a)}};a.prototype.$11=function(event,a){this.$8.logError(event,a)};a.prototype.$9=function(event,a){this.$8.debugTrace(event,"Mqtt channel: "+a)};c=new a();e.exports=c}),null);
__d("MessageEventStream",["invariant","Int64","MercurySingletonProvider","MqttChannel","MqttLogger","MqttWsClientTypedLogger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();h.getForFBID=function(a){return i.getForFBID(a)};h.setup=function(a){var b=a.fbid,c=a.msgSequenceId,d=a.fbidThreadFilter;a=a.queuePosition;!b&&g(0);b=h.getForFBID(b);b.init(c,d,a)};function h(a){this.$2="Disconnected",this.$1=a,this.$3=[],this.$6=b("MqttLogger").getInstance()}h.prototype.init=function(a,c,d){__p&&__p();if(!a&&!d)return this;this.$4=a?b("Int64").fromString(a.toString()):null;this.$7=c;this.$8=d;b("MqttChannel").subscribe("/t_ms",function(a){return this.$9(a)}.bind(this));b("MqttChannel").subscribe("/notify_disconnect",function(a){return this.$10(a)}.bind(this));this.$11(c,d);return this};h.prototype.addDeltaStreamListener=function(a){this.$3.push(a)};h.prototype.$10=function(a){var b="notify_disconnect";try{b=String.fromCharCode.apply(null,a)}catch(a){this.$6.logError("notify_disconnect",a)}b==="IRIS_CURSOR_LIMIT"&&(this.$5=null);this.$6.bumpCounter("notify_disconnect_request");this.$3.forEach(function(a){return a.onStreamDisconnect(b)})};h.prototype.$9=function(a){__p&&__p();var c=void 0;try{var d="";for(var e=0;e<a.length;e++)d+=escape(String.fromCharCode(a[e]));c=JSON.parse(decodeURIComponent(d))}catch(a){this.$6.logError("process_deltas",a);return}a=this.$1;e=this.$4;if(c.syncToken){this.$12(c);return}else if(c.queueEntityId!=a){this.$6.bumpCounter("delta_for_other_fbid");return}else{d=c.deltas;a={seq_id:e&&e.toString(),first_seq_id:"",last_seq_id:"",deltas_in_batch:[]};if(d&&e){var f=c.firstDeltaSeqId.toString();c=c.lastIssuedSeqId.toString();var g=b("Int64").fromString(f),h=b("Int64").fromString(c);a.first_seq_id=f;a.last_seq_id=c;g.equals(e.add(b("Int64").ONE))?this.$13(g,h,d,a):g.compare(e)<0?(this.$6.bumpCounter("delta_batch_in_middle"),h.compare(e)>0&&this.$13(e.add(b("Int64").ONE),h,d,a)):(this.$6.bumpCounter("missing_deltas_get_diffs"),this.$14())}else this.$6.bumpCounter("process_deltas_invalid_state");this.$15(a)}};h.prototype.$12=function(a){this.$5||(this.$5=a.syncToken),this.$4||(this.$4=b("Int64").fromString(a.firstDeltaSeqId.toString())),b("MqttChannel").subscribeChannelEvents({onMQTTStateChanged:function(a){this.$2!=="Connected"&&a==="Connected"&&(this.$5?this.$14():this.$11(this.$7,this.$8)),this.$2=a}.bind(this)}),this.$2="Connected"};h.prototype.$13=function(a,c,d,e){__p&&__p();a=a;for(var f=0;f<d.length;f++){var g=d[f],h=g["class"]||"Missing",i={seqId:a.toString(),type:h,status:""},j=1;if(h!="Missing")try{j=this.$16(g,h,a,i)}catch(a){i.status="err:"+a.message}else i.status="no type",this.$6.bumpCounter("missing_delta_type");a=a.add(b("Int64").fromInt(j));e.deltas_in_batch.push(i)}this.$4=c};h.prototype.$16=function(a,c,d,e){__p&&__p();var f=1,g="";c==="NoOp"&&(f=a.numNoOps||f,g+="n:"+f);a.irisSeqId||(a.irisSeqId=d.toString(),g+="missing seq id");var h=b("Int64").fromString(a.irisSeqId.toString())||d;h.equals(d)?g+=" seqId match":(g+=" seqId mismatch",this.$6.bumpCounter("seq_id_running_id_mismatch"));var i={type:c,payload:a};this.$3.forEach(function(a){return a.onDeltaReceived(i)});e.status=g;return f};h.prototype.$11=function(a,c){var d=void 0;a&&(d={thread_filter:[{other_user_fbid:a}]});a={sync_api_version:10,max_deltas_able_to_process:1e3,delta_batch_size:500,encoding:"JSON",entity_fbid:this.$1,initial_titan_sequence_id:this.$4&&this.$4.toString(),deviceParams:d,queue_position:c};b("MqttChannel").publish("/messenger_sync_create_queue",JSON.stringify(a))};h.prototype.$14=function(){__p&&__p();if(!this.$4){this.$6.bumpCounter("get_diffs_no_seq_id");return}if(!this.$5){this.$6.bumpCounter("get_diffs_no_sync_token");return}var a={sync_token:this.$5,sync_api_version:10,max_deltas_able_to_process:1e3,delta_batch_size:500,encoding:"JSON",entity_fbid:this.$1,last_seq_id:this.$4.toString()};b("MqttChannel").publish("/messenger_sync_get_diffs",JSON.stringify(a))};h.prototype.$15=function(a){new(b("MqttWsClientTypedLogger"))().setSeqID(a.seq_id).setFirstSeqID(a.first_seq_id).setLastSeqID(a.last_seq_id).setDeltasInBatch(JSON.stringify(a.deltas_in_batch)).log()};var i=new(b("MercurySingletonProvider"))(h);e.exports=h}),null);
__d("MessengerMQTTPayloadPreprocessor",[],(function(a,b,c,d,e,f){"use strict";a={process:function(a,b,c){var d=parseInt(c.irisSeqId.toString(),10);return{seqID:d,obj:{queue:a,iseq:d,delta:c,seqID:d,type:b}}}};e.exports=a}),null);
__d("MessengerMQTTConnection",["Arbiter","MercurySingletonProvider","MessageEventStream","MessengerMQTTPayloadPreprocessor","MqttChannel"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="messenger-mqtt-delta",h="Connected",i="Disconnected";j.getForFBID=function(a){return k.getForFBID(a)};j.get=function(){return k.get()};function j(a){this.$1=a,this.connectionState=i}j.setUp=function(a){__p&&__p();var c=a.fbid,d=a.irisSeqID,e=a.appID;a=a.endpoint;if(!c||!d)return;var f=j.getForFBID(c);j.addDeltaStream({fbid:c,irisSeqID:d});var g=function(){};b("MqttChannel").getConnectionState()===h?(f.connectionState=h,g()):b("MqttChannel").subscribeChannelEvents({onMQTTStateChanged:function(a){f.connectionState!==h&&a===h&&g(),f.connectionState=a}});b("MqttChannel").run({endpoint:a,userFbid:c,appId:e,subscribedTopics:["/t_ms"]})};j.addDeltaStream=function(a){var c=a.fbid;a=a.irisSeqID;var d=j.getForFBID(c);b("MessageEventStream").getForFBID(c).init(a).addDeltaStreamListener(d)};j.prototype.onDeltaReceived=function(a){var c=a.type;a=a.payload;c=b("MessengerMQTTPayloadPreprocessor").process(this.$1,c,a);b("Arbiter").inform(g,c)};j.prototype.onStreamDisconnect=function(a){};var k=new(b("MercurySingletonProvider"))(j);e.exports=j}),null);
__d("getFBAlphaConsoleSize",["ge"],(function(a,b,c,d,e,f){function a(){var a=b("ge")("alpha_console_container");if(a)return{height:a.offsetHeight,width:a.offsetWidth};else return{height:0,width:0}}e.exports=a}),null);
__d("getFBDockSize",["DOM","ge"],(function(a,b,c,d,e,f){__p&&__p();var g={height:0,width:0};function a(){var a=b("ge")("pagelet_dock");if(!a)return g;var c=b("DOM").scry(a,".fbDockWrapper");if(!c||c.length!==1)return g;a=c[0];return{height:a.offsetHeight,width:a.offsetWidth}}e.exports=a}),null);
__d("PresenceAccountIntagramDialog",["cx","CSS","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnEscape","LayerRefocusOnHide"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=485;c=babelHelpers.inherits(a,b("DialogX"));h=c&&c.prototype;function a(a){h.constructor.call(this,{width:i,xui:!0,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnShow"),b("LayerFadeOnHide"),b("LayerHideOnEscape"),b("LayerRefocusOnHide")]},a)}a.prototype.getContentRoot=function(){var a=h.getContentRoot.call(this);b("CSS").addClass(a,"_3acm");return a};e.exports=a}),null);
__d("XPresenceAccountInstagramAuthenticateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/instagram/authenticate/",{})}),null);
__d("XPresenceAccountInstagramConnectionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/instagram/connect/",{})}),null);
__d("XPresenceAccountInstagramCreateAndConnectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/instagram/create_connect/",{})}),null);
__d("PresenceAccountInstagramAuthenticator",["fbt","invariant","AsyncRequest","PresenceAccountInstagramAuthView.react","PresenceAccountIntagramDialog","React","XPresenceAccountInstagramAuthenticateController","XPresenceAccountInstagramConnectionController","XPresenceAccountInstagramCreateAndConnectController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();i.authenticateWithCredential=function(a,c,d,e,f){var g=b("XPresenceAccountInstagramConnectionController").getURIBuilder().getURI();i.$7(g,a,{username:c,password:d},e,f)};i.authenticateAccountWithCredential=function(a,c,d,e,f){var g=b("XPresenceAccountInstagramAuthenticateController").getURIBuilder().getURI();i.$7(g,a,{username:c,password:d},e,f)};i.authenticateWithAccountCreation=function(a,c,d,e,f,g){var h=b("XPresenceAccountInstagramCreateAndConnectController").getURIBuilder().getURI();i.$7(h,a,{username:c,email:d,phone_number:e},f,g)};i.$7=function(a,c,d,e,f){new(b("AsyncRequest"))().setURI(a).setMethod("POST").setData(Object.assign({owner_id:c,presence_owner_id:c},d)).setHandler(function(a){a=a.payload;a&&a.ig_error_message?f(a.ig_error_message):e(a)}).setErrorHandler(function(a){return f(i.getDefaultErrorMessage())}).send()};i.getDefaultErrorMessage=function(){return g._("Sorry, an unknown error occurred. Please try again.")};function i(a,b){this.$1=a,this.$2=!1,this.$3=b}i.prototype.authenticate=function(a,b){this.$2&&h(0),this.$5=a,this.$6=b,this.$8()};i.prototype.verifyAccess=function(a,b){this.$2&&h(0),this.$5=a,this.$6=b,this.$9()};i.prototype.$10=function(){this.$2&&h(0),this.$2=!0,this.$4&&this.$4.hide()};i.prototype.$8=function(){var a=b("React").createElement(b("PresenceAccountInstagramAuthView.react"),{presenceOwnerID:this.$3,onConnected:function(a){this.$5&&this.$5(a),this.$10()}.bind(this),onClose:function(){this.$6&&this.$6("USER_CLOSE_DIALOG"),this.$10()}.bind(this),viewOptions:"signIn"});this.$4=new(b("PresenceAccountIntagramDialog"))(a);this.$4.show()};i.prototype.$9=function(){var a=b("React").createElement(b("PresenceAccountInstagramAuthView.react"),{presenceOwnerID:this.$3,onConnected:function(a){this.$5&&this.$5(a),this.$10()}.bind(this),onClose:function(){this.$6&&this.$6("USER_CLOSE_DIALOG"),this.$10()}.bind(this),viewOptions:"authenticate"});this.$4=new(b("PresenceAccountIntagramDialog"))(a);this.$4.show()};e.exports=i}),null);
__d("PresmaUsageEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LINK_ACCOUNT:"link_account",UNLINK_ACCOUNT:"unlink_account",IG_UPDATE_PROFILE_IMAGE:"ig_update_profile_image",IG_UPDATE_PROFILE_DATA:"ig_update_profile_data",IG_CONNECT_VIEW_LOADED:"ig_connect_view_loaded",IG_CONNECT_XOUT_CLICKED:"ig_connect_xout_clicked",IG_CONNECT_SEE_DETAILS_CLICKED:"ig_connect_see_details_clicked",IG_SETTING_VIEW_LOADED:"ig_setting_view_loaded",IG_CONNECT_AUTH_CLICKED:"ig_connect_auth_clicked",IG_CONNECT_LOGIN_CLICKED:"ig_connect_login_clicked",IG_CONNECT_SWITCH_TO_LOG_IN:"ig_connect_switch_to_log_in",IG_CONNECT_SWITCH_TO_SIGN_UP:"ig_connect_switch_to_sign_up",IG_CONNECT_SIGN_UP_CLICKED:"ig_connect_sign_up_clicked",IG_CONNECT_CONNECT_BUTTON_CLICKED:"ig_connect_connect_button_clicked",IG_CONNECT_DISCONNECT_BUTTON_CLICKED:"ig_connect_disconnect_button_clicked",IG_CONNECT_OAUTH_CONNECT_CLICKED:"ig_connect_oauth_connect_clicked",IG_CONNECT_OAUTH_WEBVIEW_CANCEL_CLICKED:"ig_connect_oauth_webview_cancel_clicked",MISSING_INSTAGRAM_USER_FOR_V2_ID:"missing_instagram_user_for_v2_id",MISSING_PAGE_FOR_INSTAGRAM_USER:"missing_page_for_instagram_user",ACCEPT_INVITATION:"accept_invitation",ADDED_ROLE:"added_role",ATTEMPT_ADDING_OR_INVITE_ROLE:"attempt_adding_or_invite_role",ATTEMPT_CANCELING_INVITATION:"attempt_canceling_invitation",ATTEMPT_CHANGING_ROLE:"attempt_changing_role",ATTEMPT_DELETING_ROLE:"attempt_deleting_role",CANCELED_INVITATION:"canceled_invitation",CHANGED_ROLE:"changed_role",DECLINE_INVITATION:"decline_invitation",DELETED_ROLE:"deleted_role",FAILED_ADDING_ROLE:"failed_adding_role",FAILED_CANCELING_INVITATION:"failed_canceling_invitation",FAILED_CHANGING_ROLE:"failed_changing_role",FAILED_DELETING_ROLE:"failed_delete_role",FAILED_PERMISSION_CHECK:"failed_permission_check",FAILED_REMOVING_PROXY:"failed_removing_proxy",FAILED_TRANSFERING_SCHEULD_POSTS:"failed_transfering_scheuld_posts",INVITATION_SENT:"invitation_sent",FAILED_ADDING_SPECIAL_ROLE:"failed_adding_special_role",ACCEPT_PROXY_REQUEST:"accept_proxy_request",REJECT_PROXY_REQUEST:"reject_proxy_request",ACCEPT_BUSINESS_REQUEST:"accept_business_request",REJECT_BUSINESS_REQUEST:"recject_business_request",WA_ACCOUNT_CREATION_CALLBACK:"account_creation_callback",WA_REQUEST_WA_REGISTRATION_CODE:"wa_request_wa_registration_code",BUSINESS_PAGE_IG_MISMATCH:"business_page_ig_mismatch",ROLLBACK_BUSINESS_MIGRATION:"rollback_business_migration"})}),null);
__d("PresenceAccountInstagramAuthView.react",["cx","fbt","ix","AbstractButton.react","AbstractTextInput.react","Image.react","Keys","Link.react","PresmaUsageEvents","PresmaUsageTypedLogger","React","ShimButton.react","XUISpinner.react","fbglyph","joinClasses","PresenceAccountInstagramAuthenticator"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.$7=function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_XOUT_CLICKED).setBusinessID(this.props.presenceOwnerID).log(),this.props.onClose()}.bind(this),this.$8=function(a){var c=this.$9();a.keyCode===b("Keys").RETURN&&!c.isButtonDisabled()&&(c.buttonAction(),new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_LOGIN_CLICKED).setBusinessID(this.props.presenceOwnerID).log())}.bind(this),this.$1={signIn:{subtitle:h._("Log in to Instagram so you can connect with more customers right from Facebook"),buttonLabel:h._("Log In"),buttonAction:function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_LOGIN_CLICKED).setBusinessID(this.props.presenceOwnerID).log(),this.$2()}.bind(this),isButtonDisabled:function(){return!this.state.username||!this.state.password}.bind(this),renderForm:function(){return this.$3()}.bind(this),promptSectionConfig:{prompt:h._("Don't have an account?"),actionLabel:h._("Sign up"),action:function(){return this.setState({errorMessage:null,mode:"signUp"})}.bind(this)}},signUp:{subtitle:h._("Sign up to see photos and videos from your friends"),buttonLabel:h._("Create Account"),buttonAction:function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_SIGN_UP_CLICKED).setBusinessID(this.props.presenceOwnerID).log(),this.$4()}.bind(this),isButtonDisabled:function(){return!this.state.username||!this.state.email||this.state.email!==this.state.reEnterEmail}.bind(this),renderForm:function(){return this.$5()}.bind(this),promptSectionConfig:{prompt:h._("Already have an account?"),actionLabel:h._("Sign in"),action:function(){return this.setState({errorMessage:null,mode:"signIn"})}.bind(this)}},authenticate:{subtitle:h._("You're about to change the instagram username. Please enter your original username and password to verify your identity."),buttonLabel:h._("Verify"),buttonAction:function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_AUTH_CLICKED).setBusinessID(this.props.presenceOwnerID).log(),this.$6()}.bind(this),isButtonDisabled:function(){return!this.state.username||!this.state.password}.bind(this),renderForm:function(){return this.$3()}.bind(this),PromptRenderConfig:null}},this.state={username:"",password:"",email:"",reEnterEmail:"",phoneNumber:"",isRequesting:!1,errorMessage:null,mode:this.props.viewOptions}}a.prototype.$9=function(){if(this.state.mode==="authenticate")return this.$1.authenticate;else if(this.state.mode==="signUp")return this.$1.signUp;else return this.$1.signIn};a.prototype.componentDidMount=function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_SETTING_VIEW_LOADED).setBusinessID(this.props.presenceOwnerID).log()};a.prototype.render=function(){var a=this.$9();a=this.state.isRequesting?this.$10():this.$11(a);return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_2k3s")},this.$12(),a)};a.prototype.$13=function(a){return function(b){this.$14(a,b.target.value)}.bind(this)};a.prototype.$14=function(a,b){var c={};c[a]=b;this.setState(c)};a.prototype.$12=function(){return!this.state.errorMessage?null:b("React").createElement("div",{className:"_53n- _4auv _4auw"},b("React").createElement(b("Image.react"),{src:i("114551")}),b("React").createElement("div",{className:"_3-9a"},this.state.errorMessage))};a.prototype.$10=function(){return b("React").createElement("div",{className:"_4aux _4auy"},b("React").createElement("div",{className:"_2k3t _2k3u"},b("React").createElement(b("Image.react"),{src:i("96615"),height:46,width:160}),b("React").createElement("div",{className:"_3-8y"},b("React").createElement(b("XUISpinner.react"),{className:"_4auz",size:"large",background:"dark"}))))};a.prototype.$15=function(){return b("React").createElement(b("ShimButton.react"),{className:"_2k3x"+(this.state.isRequesting?" hidden_elem":""),onClick:this.$7},b("React").createElement(b("Image.react"),{src:i("114708")}))};a.prototype.$11=function(a){return b("React").createElement("div",{className:"_4au- _4auv _4auy _2k3t"},this.$15(),b("React").createElement(b("Image.react"),{src:i("96615"),height:46,width:160}),b("React").createElement("div",{className:"_2k3y"},a.subtitle),b("React").createElement("div",{className:"_2k3z"}),a.renderForm(),b("React").createElement(b("AbstractButton.react"),{className:"_2k43",onClick:a.buttonAction,label:a.buttonLabel,disabled:a.isButtonDisabled()}),this.$16(a.promptSectionConfig))};a.prototype.$5=function(){return b("React").createElement("div",null,b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("username"),value:this.state.username,onChange:this.$13("username")}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("email"),value:this.state.email,onChange:this.$13("email")}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("re-enter email"),value:this.state.reEnterEmail,onChange:this.$13("reEnterEmail")}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("phone number (optional)"),value:this.state.phoneNumber,onChange:this.$13("phoneNumber")}))};a.prototype.$3=function(){return b("React").createElement("div",null,b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("Username"),value:this.state.username,onChange:this.$13("username"),onKeyDown:this.$8}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3-",type:"password",placeholder:h._("Password"),value:this.state.password,onChange:this.$13("password"),onKeyDown:this.$8}))};a.prototype.$16=function(a){return this.state.mode==="authenticate"?b("React").createElement("div",{className:"_4av0"}):b("React").createElement("div",{className:"_4av0"},b("React").createElement("span",null,a?a.prompt:null),b("React").createElement(b("Link.react"),{onClick:a?a.action:null},a?a.actionLabel:null))};a.prototype.$2=function(){this.setState({isRequesting:!0,errorMessage:null}),b("PresenceAccountInstagramAuthenticator").authenticateWithCredential(this.props.presenceOwnerID,this.state.username,this.state.password,function(a){this.props.onConnected(a),this.setState({isRequesting:!1})}.bind(this),function(a){this.setState({isRequesting:!1,errorMessage:a})}.bind(this))};a.prototype.$6=function(){this.setState({isRequesting:!0,errorMessage:null}),b("PresenceAccountInstagramAuthenticator").authenticateAccountWithCredential(this.props.presenceOwnerID,this.state.username,this.state.password,function(a){this.props.onConnected(a),this.setState({isRequesting:!1})}.bind(this),function(a){this.setState({isRequesting:!1,errorMessage:a})}.bind(this))};a.prototype.$4=function(){this.setState({isRequesting:!0,errorMessage:null}),b("PresenceAccountInstagramAuthenticator").authenticateWithAccountCreation(this.props.presenceOwnerID,this.state.username,this.state.email,this.state.phoneNumber,function(a){this.props.onConnected(a),this.setState({isRequesting:!1})}.bind(this),function(a){this.setState({isRequesting:!1,errorMessage:a})}.bind(this))};e.exports=a}),null);
__d("XPresenceAccountOAuthUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/account/oauth/update/",{})}),null);
__d("PresenceAccountOAuthAuthenticator",["invariant","AsyncRequest","EventListener","PopupWindow","URI","XPresenceAccountOAuthUpdateController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a.informOAuthResult=function(a,b){a.postMessage({oAuthResult:b},window.location.origin)};a.extractResultFromOAuthHash=function(){var a=window.location.hash.substr(1),b=/([^&=]+)=([^&]*)/g,c={},d=null;while(d=b.exec(a))c[decodeURIComponent(d[1])]=decodeURIComponent(d[2]);if(c.error)return{succeeded:!1,error:c.error,payload:null};else return{succeeded:!0,error:null,payload:c}};function a(a,b,c,d,e){this.$1=a,this.$3=c,this.$5=!1,this.$6=b,this.$10=d,this.$11=e}a.prototype.authenticate=function(a,c){__p&&__p();this.$5&&g(0);this.$2&&g(0);this.$8=a;this.$7=c;a=new(b("URI"))("/presence/oauth/callback").setProtocol("https").setDomain(this.$1.location.hostname);c=new(b("URI"))(this.$3.url).addQueryData(this.$6).addQueryData("redirect_uri",a.toString()).toString();this.$9=b("PopupWindow").open(c,this.$3.height,this.$3.width);this.$2=b("EventListener").listen(this.$1,"message",function(event){return this.$12(event)}.bind(this));this.$4=b("EventListener").listen(this.$9,"beforeunload",function(event){this.$7&&this.$7("DIALOG_CLOSED"),this.$13()}.bind(this))};a.prototype.$12=function(event){__p&&__p();if(event.origin!==this.$1.location.origin||!event.data.oAuthResult)return;if(event.data.oAuthResult.succeeded){var a=event.data.oAuthResult.payload;a||g(0);var c=b("XPresenceAccountOAuthUpdateController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData({presence_owner_id:this.$10,presence_account_type:this.$11,payload:JSON.stringify(a)}).setHandler(function(a){this.$8&&this.$8(a.payload),this.$13()}.bind(this)).setErrorHandler(function(a){this.$7&&this.$7("UPDATE_ACCOUNT_FAILED"),this.$13()}.bind(this)).send()}else this.$7&&this.$7(event.data.error),this.$13()};a.prototype.$13=function(){this.$5&&g(0),this.$2&&this.$2.remove(),this.$2=null,this.$4&&this.$4.remove&&this.$4.remove(),this.$4=null,this.$9&&this.$9.close(),this.$9=null,this.$5=!0};e.exports=a}),null);
__d("PresenceAccountType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FACEBOOK_PAGE:"page",INSTAGRAM:"instagram",GOOGLE:"google"})}),null);
__d("XPresenceAccountDisconnectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/account/disconnect/",{})}),null);
__d("XPresenceAccountPayloadFetchController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/account/payload/fetch/",{})}),null);
__d("PresenceAccountUtilities",["invariant","AsyncRequest","PresenceAccountInstagramAuthenticator","PresenceAccountOAuthAuthenticator","PresenceAccountType","XPresenceAccountDisconnectController","XPresenceAccountPayloadFetchController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={getAuthPayloadAsync:function(a,c,d,e){var f=b("XPresenceAccountPayloadFetchController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(f).setMethod("POST").setData({owner_id:a,presence_account_type:c}).setHandler(function(b){b.payload&&b.payload.authContext||g(0),!b.payload.accountPayload&&d?h.connectToAccountOfType(a,c,b.payload.authContext,e):e(b.payload.accountPayload,null)}).setErrorHandler(function(){e(null,"ACCOUNT_PAYLOAD_FETCH_ERROR")}).send()},connectToAccountOfType:function(a,c,d,e){__p&&__p();switch(c){case b("PresenceAccountType").GOOGLE:new(b("PresenceAccountOAuthAuthenticator"))(window,d.oAuthParams,d.dialogParams,a,c).authenticate(function(a){return e(a,null)},function(a){return e(null,a)});return;case b("PresenceAccountType").INSTAGRAM:new(b("PresenceAccountInstagramAuthenticator"))(window,a).authenticate(function(a){return e(a,null)},function(a){return e(null,a)});return;default:throw new Error("Unsupported account type: "+c)}},disconnectAccountOfType:function(a,c,d){var e=b("XPresenceAccountDisconnectController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(e).setMethod("POST").setData({owner_id:a,presence_account_type:c}).setHandler(function(a){d(a.payload,null)}).setErrorHandler(function(){d(null,"DISCONNECT_FAILURE")}).send()}};e.exports=h}),null);
__d("WitConfig",["URI"],(function(a,b,c,d,e,f){__p&&__p();var g="witcfg";function h(){try{return JSON.parse(localStorage.getItem(g)||"{}")}catch(a){}return null}function i(a){return Object.keys(a).filter(function(a){return a.indexOf(g)>-1}).reduce(function(b,c){b[c.replace(g,"")]=a[c];return b},{})}var j=function(a){localStorage.setItem(g,JSON.stringify(babelHelpers["extends"]({},h(),a)))},k=function(a){a=a.replace("www.","");return a.indexOf(".sb")>-1?a.split(".sb")[0]:null};function l(a){var b=void 0;b=!1;a=a.getDomain();var c=k(a);c=c?["api."+c+".sb.facebook.com:8443","graph."+c+".sb.wit.ai","/github_authorize_url?sb="+c]:["api.wit.ai","graph.wit.ai","/github_authorize_url"];var d=c[0],e=c[1];c=c[2];return babelHelpers["extends"]({witDomain:a,apiDomain:d,graphApiDomain:e,githubAuthorizePath:c,isDev:b},h())}function a(a){__p&&__p();j(i(a.getQueryData()));a=l(a);var b=a.witDomain,c=a.apiDomain,d=a.graphApiDomain,e=a.githubAuthorizePath,f=a.isDev,g={witDomain:b,wit_base_url:"https://"+b,wit_url:function(a){return g.wit_base_url+a},api_base_url:"https://"+c,api_url:function(a){return g.api_base_url+a},graph_api_base_url:"https://"+d,graph_api_url:function(a){return g.graph_api_base_url+a},migrated_api_url:function(a){return f?g.graph_api_url(a):g.api_url(a)},doc_base_url:"https://"+b,doc_url:function(a){return g.doc_base_url+a},github_authorize_url:function(){return g.api_url(e)},isDev:f};return g}e.exports=a(new(b("URI"))(window.location.href))}),null);
__d("WitLog",[],(function(a,b,c,d,e,f){__p&&__p();a=localStorage.getItem("wit_debug");b=function(){};c=function(){var a;return(a=window.console).log.apply(a,arguments)};d=function(){var a;return(a=window.console).error.apply(a,arguments)};f=a?c:b;c=!!a&&a==="debug"?f:b;f.debug=c;f.error=d;e.exports=f}),null);
__d("WitModal.react",["WitUnderscore","React","ReactDOM","ShimButton.react"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i=window.$;g=babelHelpers.inherits(j,b("React").Component);g&&g.prototype;j.prototype.show=function(){"use strict";return this.modal("show")};j.prototype.hide=function(){"use strict";return this.modal("hide")};j.prototype.modal=function(a){"use strict";return i(b("ReactDOM").findDOMNode(this)).modal(a)};j.prototype.componentDidMount=function(){"use strict";this.modal(this.props.opts),this.props.onShown&&i(b("ReactDOM").findDOMNode(this)).on("shown.bs.modal",this.props.onShown)};j.prototype.componentWillUnmount=function(){"use strict";this.modal("hide")};j.prototype.render=function(){"use strict";var a=[];this.props.onCancel&&a.push(b("React").createElement(b("ShimButton.react"),{className:"btn btn-sm btn-primary cancel",form:"link",key:"cancel",onClick:this.props.onCancel},this.props.cancel_label));this.props.onOK&&a.push(b("React").createElement(b("ShimButton.react"),{className:"btn btn-sm btn-primary save",form:"link",key:"request",onClick:this.props.onOK},this.props.okLabel));return b("React").createElement("div",{className:"modal "+this.props.animateClass},b("React").createElement("div",{className:"modal-dialog"},b("React").createElement("div",{className:"modal-content"},this.props.header?b("React").createElement("div",{key:"h",className:"modal-header"},b("React").createElement("h4",null,this.props.header)):null,b("React").createElement("div",{key:"b",className:"modal-body"},b("React").createElement("div",{key:"x"},this.props.body)),this.props.btns||a.length>0?b("React").createElement("div",{key:"f",className:"modal-footer"},(this.props.btns||[]).concat(a)):null)))};function j(){"use strict";g.apply(this,arguments)}j.displayName="Modal";j.defaultProps={animateClass:"fade fail"};c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.handleOk=function(){this.props.onOk();return this.hideModal()}.bind(this),this.handleCancel=function(){this.props.onCancel();return this.hideModal()}.bind(this),b}a.prototype.componentDidMount=function(){"use strict";return this.modalDiv().on("hide.bs.modal",this.props.onHide)};a.prototype.modalDiv=function(){"use strict";return i(b("ReactDOM").findDOMNode(this.refs.modal))};a.prototype.hideModal=function(){"use strict";return this.modalDiv().modal("hide")};a.prototype.renderHeader=function(){"use strict";return b("React").createElement("h4",{key:"h",className:"conf-header"},"Confirm",b("React").createElement("button",{onClick:this.handleCancel,className:"btn btn-sm pull-right"},b("React").createElement("i",{className:"fa fa-times"})))};a.prototype.renderMsg=function(){"use strict";return b("React").createElement("p",{key:"m",className:"conf-msg"},this.props.msg)};a.prototype.renderOpts=function(){"use strict";return b("React").createElement("div",{key:"o",className:"conf-opts"},b("React").createElement("button",{ref:"ok",key:"y",className:"btn conf-btn conf-ok btn-danger",onClick:this.handleOk},b("React").createElement("i",{className:"fa fa-check"})),b("React").createElement("button",{key:"n",className:"btn conf-btn conf-cancel cancel",onClick:this.handleCancel},b("React").createElement("i",{className:"fa fa-times"})))};a.prototype.renderBody=function(){"use strict";return b("React").createElement("div",{key:"b",className:"conf-body"},this.renderMsg(),this.renderOpts())};a.prototype.renderInfo=function(){"use strict";return b("React").createElement("div",{key:"i",className:"conf-cont"},this.renderHeader(),this.renderBody())};a.prototype.render=function(){"use strict";var a={key:"m",ref:"modal",opts:{show:!0},animateClass:"",body:this.renderInfo()};return b("React").createElement("div",{className:"conf-modal"},b("React").createElement(j,a))};a.displayName="ConfirmModal";a.defaultProps={onOk:function(){},onCancel:function(){},onHide:function(){}};e.exports={ConfirmModal:a,Modal:j}}),null);
__d("WitHelpers",["WitUnderscore","immutable","WitLog","WitModal.react","Random","React","ReactDOM","ReactRouter-2.0.0","WitConfig"],(function(a,b,c,d,e,f){__p&&__p();var g,h=window.$,i=b("immutable").List,j=b("immutable").Set,k=b("immutable").Iterable,l=b("ReactRouter-2.0.0").Link,m=b("WitModal.react").ConfirmModal;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.children;a=babelHelpers.objectWithoutProperties(a,["children"]);return b("React").createElement(l,babelHelpers["extends"]({activeClassName:"active"},a),c)};function a(){"use strict";g.apply(this,arguments)}var n=["webkit","ms","moz","Moz","o","O"];c=function(a,b){__p&&__p();b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=n,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=f+b;if(a[f])return f}return null};var o=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;window.rAF||(window.rAF=c(window,"requestAnimationFrame")||function(a){return setTimeout(a,16.7)});var p=null,q=function a(b,c,d,e){p===null&&(p=h(window));var f=this,g=arguments;return function(h){h=(h-b)/c;if(h>=1)return;h=d+h*e;p.scrollTop(h);return window.rAF(a.apply(f,g))}},r=[];for(var d=160;d<=280;d+=30)r.push(d);r=b("WitUnderscore").shuffle(r);var s=0,t={};e.exports={makeWitUsername:function(a){return a.toLowerCase().replace(/[^a-zA-Z0-9\-\_]/gi,"")},isMac:function(){return window.navigator&&window.navigator.platform.match(/Mac/)},get_color:function(a,c){var d;void 0;b("WitUnderscore").isNumber(c)||(c=90);if(d=t[a])return"hsla("+d+", 85%, "+c+"%, 0.5)";d=r[s];s=(s+1)%r.length;t[a]=d;return"hsla("+d+", 85%, "+c+"%, 0.5)"},trim:function(a){return h.trim(a)},throw_in_promise:function(a){return window.setTimeout(function(){throw a})},assert:function(a,c){var d=b("WitUnderscore").isFunction(a)?a():a;if(!d)throw new Error("Assertion failed: "+(c||a))},isUUID:function(a){return o.test(a)},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})},popup:function(a){__p&&__p();a||(a={});a.cb||(a.cb=function(){});var c=null,d=window.screenX||window.screenLeft,e=window.screenY||window.screenTop,f=window.outerWidth||document.documentElement.clientWidth,g=window.outerHeight||document.documentElement.clientHeight-22,h=a.under?1:939,i=a.under?1:609;d=d<0?window.screen.width+d:d;d=parseInt(d+(f-h)/2,10);f=parseInt(e+(g-i)/2.5,10);e="width="+h+",height="+i+",left="+d;e+=",top="+f+",scrollbars=1,location=1,toolbar=0";g=function d(event){b("WitLog")("> Received message",event);if(a.origin&&event.origin!==a.origin){b("WitLog")("> Different origin",event.origin);return}window.removeEventListener("message",d,!1);return a.cb(event.data,c)};b("WitLog")("> Listening for message");h=/MSIE/i.test(window.navigator&&window.navigator.userAgent);h?(document.domain=b("WitConfig").wit_domain,window.wit_callback=function(b){b=JSON.parse(b);return a.cb(b,c)}):window.addEventListener("message",g,!1);c=window.open(a.url,a.title,e);a.under&&c.opener.window.focus();return c},blank:function(a){return!a||!b("WitUnderscore")(a).size()},to_slug:function(a){return a.toLowerCase().split(" ").join("_").replace(/[^a-zA-Z0-9_]/,"")},pretty_date:function(a){if(!a)return;a=new Date(a);return a.toLocaleDateString()+" "+a.toLocaleTimeString()},chat_date:function(a){var b=new Date(),c=b.getFullYear()===a.getFullYear(),d=b.getMonth()===a.getMonth();b=b.getDate()===a.getDate();var e=a.toLocaleTimeString();if(c&&d&&b)return e;else return a.toLocaleDateString()+" "+e},human_date:function(a){__p&&__p();if(!a){!1;return}var b=new Date();b=b.getTime()-a.getTime();b=Math.round(b/1e3);if(b<60)return"a few seconds ago";b=Math.round(b/60);if(b<60)return b+" minutes ago";b=Math.round(b/60);if(b<24)return b+" hours ago";b=Math.round(b/24);if(b<31)return b+" days ago";b=Math.round(b/31);if(b<12)return b+" months ago";b=Math.round(b/12);return b+" years ago"},is_visible:function(a){a=a.getBoundingClientRect();return a.top>=0&&a.left>=0&&a.bottom<=h(window).height()&&a.right<=h(window).width()},browser:function(){var a=navigator.userAgent.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];var b=a[1]||"";a=a[2]||"0";var c={};b&&(c[b]=!0,c.version=a);c.chrome?c.webkit=!0:c.webkit&&(c.safari=!0);c.supported=c.webkit||c.mozilla;return c},confirm:function(a,c,d){var e=h("<div>")[0];h("body").append(e);a={msg:a,onOk:c,onCancel:d,onHide:function(){b("ReactDOM").unmountComponentAtNode(e);return h(e).remove()}};return b("ReactDOM").render(b("React").createElement(m,a),e)},regex_escape:function(a){return h.trim(a).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},uri_encode:function(a){return encodeURIComponent(a).replace(/[!\'()]/g,escape).replace(/\*/g,"%2A")},is_valid_email:function(a){return/[^@]+@[^\.]+\..+/.test(a)},scroll_to:function(a,b){p===null&&(p=h(window));var c=window.performance&&window.performance.now?performance.now():Date.now(),d=p.scrollTop();a=a-d;return window.rAF(q(c,b,d,a))},easy_plural:function(a,b){Array.isArray(b)&&(b=b.length);if(b>1||b===0)return a+"s";else return a},intersperse:function(a,c){this.assert(function(){return b("WitUnderscore").isFunction(c)});var d=[];b("WitUnderscore").each(a,function(a){d.push(a);return d.push(c())});d.pop();return d},filterFalsy:function(a,b){var c=j(b);return a.filterNot(function(a,b){return c.has(b)&&!a})},safeCall:function(a){if(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return a.apply(this,c)}},safeParse:function(a){try{return JSON.parse(a)}catch(a){return null}},existy:function(a){return a!==null&&a!==undefined},isEmpty:function(a){return!a||(k.isIterable(a)?!a.count():!a.length)},identity:b("WitUnderscore").identity,WitLink:a,partial:b("WitUnderscore").partial,partialArgTracking:function(a){var b=a.__argtrack||i();for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=this.partial.apply(this,[a].concat(d));f.__argtrack=b.concat(d);return f},throttle:b("WitUnderscore").throttle,debounce:b("WitUnderscore").debounce,isFunction:b("WitUnderscore").isFunction,isString:b("WitUnderscore").isString,isObject:b("WitUnderscore").isObject,escape:b("WitUnderscore").escape,str:function(a){return a||""},rand_nth:function(a){return a[Math.floor(Math.random()*a.length)]},degrees:"\xb0",emDash:"\u2014",enterKey:"\u23ce",macMeta:"\u2318",happyEmojis:["\ud83d\ude01","\ud83d\ude07","\ud83d\ude0a"],happyEmoji:function(){return this.rand_nth(this.happyEmojis)},thinkingEmoji:"\ud83e\udd14",scaredEmoji:"\ud83d\ude28",sadEmojis:["\ud83d\ude23","\ud83d\ude14","\u2639\ufe0f"],sadEmoji:function(){return this.rand_nth(this.sadEmojis)},ducklingEmoji:"\ud83e\udd86",prettyUUID:function(a){a=a.match(/([^-]+)$/);return a&&a[1]||""},editorText:function(a){return a.getCurrentContent().getPlainText()},isFocusAtEnd:function(a){var b=a.getSelection();a=a.getCurrentContent().getLastBlock();return a.getKey()===b.getAnchorKey()&&a.getLength()===b.getAnchorOffset()},nextChar:function(a){var b=a.getSelection(),c=b.getEndOffset();a=a.getCurrentContent().getBlockForKey(b.getEndKey());return a.getText().charAt(c)},filterStr:function(a,b){a=(a||"").toLowerCase().trim();b=(b||"").toLowerCase().trim();return b&&b!==a&&b.startsWith(a)},iterableOf:function(a){__p&&__p();var b=function(b,c,d){for(var e=arguments.length,f=Array(e>3?e-3:0),g=3;g<e;g++)f[g-3]=arguments[g];var h=c[d];if(b&&!k.isIterable(h))throw new Error(d+" is not an iterable");var j=(h||i()).map(function(b,c){return a.apply(undefined,[[b],0].concat(f))}).find(function(a){return a instanceof Error});return j||null},c=b.bind(null,!1);c.isRequired=b.bind(null,!0);return c},memoize1:function(a,b){var c=[];return function(){var d=b?b.apply(undefined,arguments):arguments.length<=0?undefined:arguments[0];d!==c[0]&&(c=[d,a.apply(undefined,arguments)]);return c[1]}},truncate:function(a,b){a=a||"";if(a.length<=b)return a;else return a.substring(0,b)+"..."},shuffle:function(a){__p&&__p();a=Object.assign([],a);var c=a.length;while(0!==c){var d=Math.floor(b("Random").random()*c);c-=1;var e=a[c];a[c]=a[d];a[d]=e}return a},partition:function(a,b){var c=[],d=[];a.forEach(function(a){b(a)?c.push(a):d.push(a)});return[c,d]},pick:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.reduce(function(b,c){Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b},{})},findWhere:function(a,b){return a.find(function(a){return Object.keys(b).every(function(c){return a[c]===b[c]})})},isValidValue:function(a){var b=typeof a==="string"&&a!=="";return typeof a==="number"||b}}}),null);
__d("AbstractRelaySearchSource",["AbstractAsyncSearchSource","debounceCore","fetchRelayModernQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function h(a){return function(c,d,e,f){d=d.gen(c.value);c=d.query;d=d.variables;return b("fetchRelayModernQuery")(a,c,d).then(e,f)}}c=babelHelpers.inherits(a,b("AbstractAsyncSearchSource"));g=c&&c.prototype;function a(a,c,d){g.constructor.call(this,c,b("debounceCore")(h(a),225),d)}e.exports=a}),null);
__d("XBizGrowthPageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/business/a/{*subpath}/",{subpath:{type:"String",required:!0}})}),null);